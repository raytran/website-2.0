import{S as a,i as s,s as n,B as e,j as t,m as o,o as i,p,q as r,x as c,u as l,v as h,X as u,e as d,t as m,k,c as g,a as f,g as w,d as b,n as y,b as v,J as E,R as I,f as P,G as T,H as A}from"./vendor-6faa5744.js";import{P as x}from"./ProjectPage-8d746a0a.js";function S(a){let s,n,e,t,o,i,p,r,c,l,h,u,x,S,L,H,W,j,C,N,q,_,O,z,G,D,F,B,U,Y,$,V,K,Q,J,Z,X,aa,sa,na,ea,ta,oa,ia,pa,ra,ca,la,ha,ua,da,ma,ka,ga,fa,wa,ba,ya,va,Ea,Ia,Pa,Ta,Aa,xa,Sa,La,Ha,Ma,Ra,Wa,ja,Ca,Na,qa,_a,Oa,za,Ga,Da,Fa,Ba,Ua,Ya,$a,Va,Ka,Qa,Ja,Za,Xa,as,ss,ns,es,ts,os,is,ps,rs,cs,ls,hs,us,ds,ms,ks,gs,fs,ws,bs,ys,vs,Es,Is,Ps,Ts,As,xs,Ss,Ls,Hs,Ms,Rs,Ws,js,Cs,Ns,qs,_s,Os,zs,Gs,Ds,Fs,Bs,Us,Ys,$s,Vs,Ks,Qs,Js,Zs,Xs,an,sn,nn,en,tn,on,pn,rn,cn,ln,hn,un,dn,mn,kn,gn,fn,wn,bn,yn,vn,En,In,Pn,Tn,An,xn,Sn,Ln,Hn,Mn,Rn,Wn,jn,Cn,Nn,qn,_n,On,zn,Gn,Dn,Fn,Bn,Un,Yn,$n,Vn,Kn,Qn,Jn,Zn,Xn,ae,se,ne,ee,te,oe,ie,pe,re,ce,le,he,ue,de,me,ke,ge,fe,we,be,ye,ve,Ee,Ie,Pe,Te,Ae,xe,Se,Le,He,Me,Re,We,je,Ce,Ne,qe,_e,Oe,ze,Ge,De,Fe,Be,Ue,Ye,$e,Ve,Ke,Qe,Je,Ze,Xe,at,st,nt,et,tt,ot,it,pt,rt,ct,lt,ht,ut,dt,mt,kt,gt,ft,wt,bt,yt,vt,Et,It,Pt,Tt,At,xt,St,Lt,Ht,Mt,Rt,Wt,jt,Ct,Nt,qt,_t,Ot,zt,Gt,Dt,Ft,Bt,Ut,Yt,$t,Vt,Kt,Qt,Jt,Zt,Xt,ao,so,no,eo,to,oo,io,po,ro,co,lo,ho,uo,mo,ko,go,fo,wo,bo,yo,vo,Eo,Io,Po,To,Ao,xo,So,Lo,Ho,Mo,Ro,Wo,jo,Co,No,qo,_o,Oo,zo,Go,Do,Fo,Bo,Uo,Yo,$o,Vo,Ko,Qo,Jo,Zo,Xo,ai,si,ni,ei,ti,oi,ii,pi,ri,ci,li,hi,ui,di,mi,ki,gi,fi,wi,bi,yi,vi,Ei,Ii,Pi,Ti,Ai,xi,Si,Li,Hi,Mi,Ri,Wi,ji,Ci,Ni,qi,_i,Oi,zi,Gi,Di,Fi,Bi,Ui,Yi,$i,Vi,Ki,Qi,Ji,Zi,Xi,ap,sp,np,ep,tp,op,ip,pp,rp,cp,lp,hp,up,dp,mp,kp,gp,fp,wp,bp,yp,vp,Ep,Ip,Pp,Tp,Ap,xp,Sp,Lp,Hp,Mp,Rp,Wp,jp,Cp,Np,qp,_p,Op,zp,Gp,Dp,Fp,Bp,Up,Yp,$p,Vp,Kp,Qp,Jp,Zp,Xp,ar,sr,nr,er,tr,or,ir,pr,rr,cr,lr,hr,ur,dr,mr,kr,gr,fr,wr,br,yr,vr,Er,Ir,Pr,Tr,Ar,xr,Sr,Lr,Hr,Mr,Rr,Wr,jr,Cr,Nr,qr,_r,Or,zr,Gr,Dr,Fr,Br,Ur,Yr,$r,Vr,Kr,Qr,Jr,Zr,Xr,ac,sc,nc,ec,tc,oc,ic,pc,rc,cc,lc,hc,uc,dc,mc,kc,gc,fc,wc,bc,yc,vc,Ec,Ic,Pc,Tc,Ac,xc,Sc,Lc,Hc,Mc,Rc,Wc,jc,Cc,Nc,qc,_c,Oc,zc,Gc,Dc,Fc,Bc,Uc,Yc,$c,Vc,Kc,Qc,Jc,Zc,Xc,al,sl,nl,el,tl,ol,il,pl,rl,cl,ll,hl,ul,dl,ml,kl;return{c(){s=d("div"),n=d("h4"),e=m("Note"),t=m("\n  This post was originally on the MIT Admissions website as a guest blogpost. If you want, you can read it on the MIT Admission site "),o=d("a"),i=m("here"),p=m("."),r=k(),c=d("h1"),l=m(M),h=k(),u=d("h2"),x=m(R),S=k(),L=d("p"),H=d("a"),W=m("PROTOCHESS.COM"),j=k(),C=d("p"),N=m("TLDR: I made this chess website that lets you design custom pieces and boards. Play on it "),q=d("a"),_=m("here"),O=m(". You can play against the chess engine I wrote as well."),z=k(),G=d("div"),D=d("iframe"),B=k(),U=d("h2"),Y=m("The Inspiration"),$=k(),V=d("p"),K=m("CPW. 2019. I was a but a lowly prefrosh making friends. I met Chambers. You might’ve heard of him. He’s that guy from the "),Q=d("a"),J=m("Duolingo thing"),Z=m("."),X=k(),aa=d("p"),sa=m("He challenged me to a game of chess. Aidan Chambers, the chess man. He was born from chess. Years of generational chess experience flows through his veins. Me? Raymond Tran? I haven’t played chess in years. Yet there I was, ready to challenge the one and only Aidan Chambers. Long story short he made some terrible mistake and I won."),na=k(),ea=d("p"),ta=m("This didn’t phase me. But I know it hurt him. From this he would never recover. His chess confidence was destroyed. I broke him that day."),oa=k(),ia=d("p"),pa=m("Now he won’t stop talking about chess. Like a broken record. Since then, he’s been training his chess ability. Little does he know: so have I."),ra=k(),ca=d("p"),la=m("For the past six months I have been secretly training in chess with hopes to beat Aidan Chambers yet again. During this time, I learned about the existence of chess variants: chess games with modified pieces and boards. I couldn’t find a website that let you build these yourself, so I did what any rational person would: devote the next six months of my life to writing a chess variant website."),ha=k(),ua=d("p"),da=m("This blogpost is the story of how I wrote that website. Play on it "),ma=d("a"),ka=m("here"),ga=m(". The story of me vs Chambers in our ultimate chess battle? That story is to be continued…."),fa=k(),wa=d("h2"),ba=m("Engine"),ya=k(),va=d("p"),Ea=m("Behind every good chess website is a chess engine. This is the program that determines the rules behind chess and which moves are the best for any given board. Chess engines usually work by searching through all possible moves and picking the best one (the newer, machine-learning based chess engines are the exception). This sounds simple, and it is! Modern chess engines just use a lot of optimizations to be able to search deeper into the game tree."),Ia=k(),Pa=d("p"),Ta=m("Sidenote: I think "),Aa=d("a"),xa=m("6.172"),Sa=m(" makes you write a chess engine for a chess variant called Leiserchess, but I haven’t taken that class yet so I could be wrong. I imagine a lot of the techniques I’m about to describe are also used in that class."),La=k(),Ha=d("p"),Ma=m("Anyway:"),Ra=k(),Wa=d("p"),ja=m("What goes into a (basic) chess engine?"),Ca=k(),Na=d("ul"),qa=d("li"),_a=d("a"),Oa=m("Board Representation"),za=k(),Ga=d("li"),Da=d("a"),Fa=m("Move Generation"),Ba=k(),Ua=d("li"),Ya=d("a"),$a=m("Evaluation"),Va=k(),Ka=d("li"),Qa=d("a"),Ja=m("Search"),Za=k(),Xa=d("h2"),as=m("Board Representation"),ss=k(),ns=d("p"),es=m("Note: Protochess supports up to 16×16 sized boards and custom pieces that do crazy things, but for the purposes of this article I’ll be writing as if it were just a standard chess game. I will include a few sentences on where protochess differs in the approach, though."),ts=k(),os=d("p"),is=m("The first step to writing your own chess program is picking a way to represent your board. A natural approach would be something like this:"),ps=k(),rs=d("pre"),cs=k(),ls=d("p"),hs=m("A single array, with a character for each piece. Upper case for white, lowercase for black. This is called a square-centric approach, since we keep information based on the squares on the board."),us=k(),ds=d("p"),ms=m("Cool, but a little too slow for our purposes. Remember: it’s essential that we do everything as fast as possible to have a good engine."),ks=k(),gs=d("p"),fs=m("We can use a trick! Computers are really good at doing math with 64 bit integers. 64 just happens to be the number of squares on a standard chess board! Funny coincidence. Knowing this, we can represent our pieces like this:"),ws=k(),bs=d("p"),ys=m("Let’s call each 64 bit number a bitboard. A bitboard is just a mapping from bits in the number to places on the board. We can do this in a number of ways, but in protochess this is done using little-endian rank-file mapping. It looks like this:"),vs=k(),Es=d("img"),Ps=k(),Ts=d("p"),As=d("a"),xs=m("image source"),Ss=k(),Ls=d("p"),Hs=m("Notice that the 0th bit is on the A1 square, and the 63rd bit is on the H8 square."),Ms=k(),Rs=d("p"),Ws=m("We can represent the a board using one bitboard per piece type. We will have 12 in total (one for each piece type and color == 2x pawn, 2x knight, 2x king, 2x queen, 2x rook, 2x bishop)"),js=k(),Cs=d("p"),Ns=m("In each bitboard, set the bit to 1 if the piece is there, and 0 if the piece isn’t."),qs=k(),_s=d("p"),Os=m("For instance, if our board looks like this:"),zs=k(),Gs=d("pre"),Ds=k(),Fs=d("p"),Bs=m("The corresponding bitboard for the white pawns looks like this:"),Us=k(),Ys=d("pre"),$s=k(),Vs=d("p"),Ks=m("Pretty simple huh? In contrast to the earlier array-based design, this is a piece-centric approach, since we focus on each piece type as a set of locations."),Qs=k(),Js=d("p"),Zs=m("We have a few advantages here, especially when you consider bitwise operations that computers can do."),Xs=k(),an=d("p"),sn=m("One of them is the AND (&): "),nn=d("code"),en=m("let c = (a & b)"),tn=m(" takes two numbers a, b, and returns a new number c where each bit in c is true if the corresponding bits in a and b are true.\nUsing this representation, we can perform really powerful set-wise operations, such as asking “give me all the white pawns standing on the second rank.” In our array representation, we’d have to search through 8 indices, while now, we can write "),on=d("code"),pn=m("(WHITE_PAWNS & 2ND_RANK)"),rn=m("."),cn=k(),ln=d("h2"),hn=m("Move Generation"),un=k(),dn=d("p"),mn=m("This is the game of chess itself, with all its moves and rules. While it’s simple in theory, it is actually the hardest part about writing an (efficient) chess engine."),kn=k(),gn=d("p"),fn=m("In chess, there are two types of pieces: jumping pieces and sliding pieces. Jumping pieces like the knight can “jump” over other pieces, while sliding pieces like the queen can have their movement blocked. Move generation for sliding and jumping pieces can be done very efficiently using bitboards."),wn=k(),bn=d("h3"),yn=m("Jumping pieces (knight, pawn, king)"),vn=k(),En=d("p"),In=m("The fastest way to generate moves for any piece is to just look up the possible moves in a precomputed table. For jumping pieces, this is easy since we don’t have to consider any blockers in the way."),Pn=k(),Tn=d("p"),An=m("At the start of our program, we initialize a huge table for jumping pieces (like the knight), mapping board locations (indices) to possible movements (as a Bitboard). We can use bit manipulation (bit shifts, masks) to set bits in the relevant locations for each jumping piece table."),xn=k(),Sn=d("p"),Ln=m("Then, during our program, we can access the movement by indexing the table. For instance, a knight sitting at C3 can be indexed like this:"),Hn=k(),Mn=d("pre"),Rn=k(),Wn=d("p"),jn=m("(For clarity, . is used instead of 0 and the C3 square is marked with an x instead of 0)."),Cn=k(),Nn=d("p"),qn=m("It’s important to remember that these are just possible squares that we can move to. We don’t want to attack our own pieces, for instance.\nThis is where our choice of bitboards really shines. We can “block out” invalid moves like attacking your own pieces with simple bitwise operations, like so:"),_n=k(),On=d("pre"),zn=k(),Gn=d("p"),Dn=m("With a few adjustments, it’s easy to see how the scheme above works for all jumping pieces (kings, pawns)."),Fn=k(),Bn=d("h3"),Un=m("Sliding pieces"),Yn=k(),$n=d("p"),Vn=m("Sliding pieces are a little more complicated. It is possible to use a similar approach as jumping pieces, but we would need a lot of memory and a few tricks (See: "),Kn=d("a"),Qn=m("magic bitboards"),Jn=m(". Protochess, with it’s focus on having 16×16 sized customizable boards would need a LOT of memory."),Zn=k(),Xn=d("p"),ae=m("So instead, let’s think about what you really need to determine the possible moves for a sliding piece."),se=k(),ne=d("pre"),ee=k(),te=d("p"),oe=m("This is the minimum amount of information that we need to determine moves. For a standard chess game, we have up to 2^8 possible occupancies, which looks something like this:"),ie=k(),pe=d("pre"),re=k(),ce=d("p"),le=m("We can actually loop through all possible occupancy states like so:"),he=k(),ue=d("pre"),de=k(),me=d("p"),ke=m("..and precalculate sliding moves for each state! We can store our results in a table like so:"),ge=k(),fe=d("pre"),we=k(),be=d("p"),ye=m("All we need now is a way to map each direction (rank, file, diagonal, antidiagonal) to and from the relevant 8 bits. We can use the first rank as a place to extract our relevant bits from the bitboard."),ve=k(),Ee=d("p"),Ie=m("Say we have a rook on C3 (marked as x) and we want to know where it can go (looking at only the horizontal direction), given the blockers on the board (marked as 1):"),Pe=k(),Te=d("pre"),Ae=k(),xe=d("pre"),Se=k(),Le=d("pre"),He=k(),Me=d("p"),Re=m("Now we can use the bits at the first rank to index into our table:"),We=k(),je=d("pre"),Ce=k(),Ne=d("p"),qe=m("…And we can map these 8 bits onto the first rank of a bitboard and shift it back up using the same operations in reverse, giving us:"),_e=k(),Oe=d("pre"),ze=k(),Ge=d("p"),De=m("…which are the possible moves for our rook on C3! Hooray!"),Fe=k(),Be=d("p"),Ue=m("Similar operations can be done to map between diagonals and the first rank. Again, we need to mask off this bitboard the same way we did earlier to ensure that we don’t attack our own pieces."),Ye=k(),$e=d("p"),Ve=m("We’re still missing one key aspect: How do we get our moves “out” of a bitboard?"),Ke=k(),Qe=d("p"),Je=m("Simple, just loop through them like so:"),Ze=k(),Xe=d("pre"),at=k(),st=d("p"),nt=m("Apart from the standard rules like encoding how all the pieces move, you also have to consider rules such as the en-passant, castling, and promotions, but these don’t have any fancy tricks like above so I won’t mention it."),et=k(),tt=d("h3"),ot=m("Testing your move generation"),it=k(),pt=d("p"),rt=d("em"),ct=m("Question"),lt=m(": How do you make sure your move generation is correct? There are so many possible moves, with so many possible boards and responses?"),ht=k(),ut=d("p"),dt=d("em"),mt=m("Answer:"),kt=m(" Use perft! This is a function that you write into your chess engine that walks through the game tree, move by move, and recursively counts through all possible moves up to a certain depth. It looks like:"),gt=k(),ft=d("pre"),wt=k(),bt=d("p"),yt=m("For example, perft(0) on the starting position gives us 20, since there are 20 possible moves white can make (2 per pawn, 2 per knight). perft(1) = 40, since the sides are symmetric."),vt=k(),Et=d("p"),It=m("Here are some more perft values at the starting position:"),Pt=k(),Tt=d("pre"),At=k(),xt=d("p"),St=d("a"),Lt=m("Full list here"),Ht=k(),Mt=d("p"),Rt=m("Don’t you just love exponential growth? Chess actually has a branching factor of around 35, meaning there are more possible chess positions "),Wt=d("code"),jt=m("(10^120)"),Ct=m(" than atoms in the universe "),Nt=d("code"),qt=m("(10^81)"),_t=m("."),Ot=k(),zt=d("p"),Gt=m("Writing a good move generator legitimately took me months (mostly because I didn’t know what I was doing yet). I ended up rewriting this several times, unsatisfied with the performance of each. The first couple tries were in C++, and my time for perft(6) was 5+ minutes on my computer. This was because of a slow move generation algorithm–math instead of lookup tables, and because I was using a slow 256 bit number library (big boards big challenges big thoughts)."),Dt=k(),Ft=d("p"),Bt=m("I eventually settled on a final rewrite in Rust, using a faster 256 bit number library and the generation scheme described above, which is providing me with decent speed and efficiency. Perft(6) on the starting position finishes in less than three seconds now. Much better!"),Ut=k(),Yt=d("h2"),$t=m("Evaluation"),Vt=k(),Kt=d("p"),Qt=m("Evaluation is the process of assigning the board a score. It allows the engine to determine what a “good” position means. The score itself is the sum of the player to move’s "),Jt=d("strong"),Zt=m("material score"),Xt=m(" and "),ao=d("strong"),so=m("positional score"),no=m("."),eo=k(),to=d("p"),oo=m("The "),io=d("strong"),po=m("material score"),ro=m(" is just the amount of material that either side has. Protochess measures material in centipawns, which is 1/100ths of a pawn. Using this model, here are the centipawn values for each standard piece:"),co=k(),lo=d("pre"),ho=k(),uo=d("p"),mo=m("As you can see, we add a bonus for castling moves, while getting checkmated essentially means having -INF score.\nThis works fine for the pieces in a standard chess game, but the whole point of protochess is to design your own pieces, so how do we score those?"),ko=k(),go=d("p"),fo=m("At the moment, the score for each custom piece is determined as the sum of possible moves that each piece has. For instance, if a piece can move north and south, the score for that piece is simply "),wo=d("code"),bo=m("[northScore + southScore]"),yo=m("."),vo=k(),Eo=d("p"),Io=m("The other part of the evaluation score is the "),Po=d("strong"),To=m("positional score"),Ao=m(". Having more pieces than your opponent is important, but so is where those pieces are. It wouldn’t be very good to have all your pieces stuck behind your pawns (called piece development). Normal engines handle this by defining piece-square tables, which are big arrays mapping each tile to a certain point value for each piece."),xo=k(),So=d("p"),Lo=m("Here is an example table for white pawns taken from the chess programming wiki:"),Ho=k(),Mo=d("pre"),Ro=k(),Wo=d("p"),jo=m("As you can see, pawns are encouraged to stay in the middle and progress towards the 7th/8th rank so that they can promote."),Co=k(),No=d("p"),qo=m("This works fine for normal chess, but again protochess is designed to not be normal chess. We can design custom boards of up to 16×16 tiles, so pre-set piece square tables won’t be very useful here. To get around this, piece square tables are generated dynamically for each piece by counting the possible number of moves for each piece on an otherwise empty board. This retains some properties like encouraging pieces to move towards the center (since pieces typically have more moves at the center), but it misses when you try to add things like king safety and pawn structure."),_o=k(),Oo=d("p"),zo=m("At the moment, this seems to be good enough to beat your casual chess player, but improvements can definitely be made."),Go=k(),Do=d("h2"),Fo=m("Search"),Bo=k(),Uo=d("p"),Yo=m("Now on to the “AI” part of the chess engine. Despite the name, it really isn’t very intelligent. Computers are just dumb rocks that we’ve fooled into doing math."),$o=k(),Vo=d("p"),Ko=m("Here’s how it works:"),Qo=k(),Jo=d("p"),Zo=m("At its core the search is a highly optimized version of the minimax algorithm. This algorithm walks through the game tree up to a certain depth, assuming that each player plays optimally. It picks the branch that provides the most benefit to us, while minimizing the benefit of the opposing player."),Xo=k(),ai=d("p"),si=d("a"),ni=m("Here’s a simplified diagram of that behavior"),ei=m(":"),ti=k(),oi=d("img"),pi=k(),ri=d("p"),ci=m("Here is that framework applied in a negamax version, which takes advantage of the fact that if black is up by 5 points, then the overall evaluation is just -1 * 5 (hence the name Nega(tive)-(min)max)."),li=k(),hi=d("pre"),ui=k(),di=d("p"),mi=m("Now, if you were to build a chess algorithm using a plain min/max with no optimizations, it would still play decent chess, but would likely only be able to search up to 3 ply (3 moves ahead) in a reasonable amount of time. In comparison, the protochess engine currently searches to around 10 ply in ~5s on my machine. For reference, Stockfish regularly searches to 20+ ply using even more optimizations."),ki=k(),gi=d("p"),fi=m("Here’s a list of search optimizations that the protochess engine includes:"),wi=k(),bi=d("ul"),yi=d("li"),vi=m("Alpha-beta pruning "),Ei=d("ul"),Ii=d("li"),Pi=m("The idea here is to stop searching moves that automatically lead to a bad position. This is similar to how humans play chess; if we see a move that immedietely leads to a lost position, we naturally stop searching moves that come after it."),Ti=k(),Ai=d("li"),xi=m("Alpha-beta pruning alone guarantees the same end results as min/max, just with less work done."),Si=k(),Li=d("li"),Hi=m("It’s easy to see how if we search better moves first, we are more likely to find a good variation that results in more cutoffs. So much so, that with perfect move ordering, if minmax searches x nodes, then we can expect an alpha-beta search to search only sqrt(x) nodes!"),Mi=k(),Ri=d("li"),Wi=m("Quiescence search"),ji=d("ul"),Ci=d("li"),Ni=m("Searches can suffer from the horizon effect, which happens when a search reaches its maximum depth but still doesn’t know enough about a position to accurately rate its moves. For instance, at the last depth of a search the engine can find a move that appears good but actually leads to the Queen being lost. To fix this, we simply switch to a Quiescence search (quiet search), meaning we keep searching using only capture moves until we run out of capture moves to make. This solves our problem of dropping pieces and results in a much more reliable engine."),qi=k(),_i=d("li"),Oi=m("Principal Variation Search"),zi=d("ul"),Gi=d("li"),Di=m("This search method takes advantage of the fact that it’s easier to prove a move is bad than it is to calculate the full score of a move, so we search the first moves in our list fully, and reduce the search window for subsequent searches."),Fi=k(),Bi=d("li"),Ui=m("MVV-LVA Move ordering"),Yi=d("ul"),$i=d("li"),Vi=m("This stands for most-valuable-victim, least-valuable-attacker move ordering. As described above, alpha beta search benefits massively from a good search order. MVV-LVA sorts the moves in each ply to help ensure a good ordering."),Ki=k(),Qi=d("li"),Ji=m("Killer + History Heuristic"),Zi=d("ul"),Xi=d("li"),ap=m("These heuristics store moves that caused cutoffs in the past, and whenever the engine encounters them again, the moves are ranked higher in the move ordering."),sp=k(),np=d("li"),ep=m("Null move pruning"),tp=d("ul"),op=d("li"),ip=m("Most of the time, the worst thing you can do in chess is to pass (with some exceptions). As such, null move pruning makes a “null move” (skips turn), and if the engine still can’t find a move that improves the opponent score (beta cutoff), then we know we can ignore the branch."),pp=k(),rp=d("li"),cp=m("Late move reductions"),lp=d("ul"),hp=d("li"),up=m("Since our move ordering is pretty good at this point, we can search later moves with reduced depth. This can dramatically improve search depth, but care must be taken to ensure that our search still remains stable."),dp=k(),mp=d("li"),kp=m("Transposition table with Zobrist Hashing"),gp=d("ul"),fp=d("li"),wp=m("A zobrist hash is a number assigned to a particular board position. It is used similarly to an ID; it is supposed to be unique to the position.\n– These numbers are used to index a big hashtable of positions, where we store information between searches."),bp=k(),yp=d("li"),vp=m("Iterative deepening"),Ep=d("ul"),Ip=d("li"),Pp=m("Iterative deepening just means that if we want to search to depth x, we first search to depth 1, then 2, then 3, then 4, up to x. At first glance, it may seem like doing a lot of extra work, but in reality the amount of time to search at lower depths is trivial, and it allows us to use information from the shallow searches to help us for our deeper searches (move ordering/transposition table). Additionally, we can stop early and use our low-depth results if we run out of time."),Tp=k(),Ap=d("h2"),xp=m("Online Play, Website, and Deployment"),Sp=k(),Lp=d("p"),Hp=m("Now for the website itself."),Mp=k(),Rp=d("p"),Wp=m("The frontend was originally written using React, but after watching "),jp=d("a"),Cp=m("this video on svelte"),Np=m(" and seeing how simple it was, I switched immediately. Svelte has the added benefit of being a compiler, so the website only serves what it needs (without a virtual DOM). This basically means it should load pretty quickly, which fits the theme of this blog post quite well. I used the "),qp=d("a"),_p=m("Bulma css library"),Op=m(" to get things looking pretty."),zp=k(),Gp=d("p"),Dp=m("The backend also uses Rust, for no other reason than it seeming like the simplest solution to run our chess logic and webserver using the same language. Looking back, it would’ve been easier to use something like node.js with neon for rust bindings."),Fp=k(),Bp=d("p"),Up=m("Since the engine is written in Rust, we can implement singleplayer by simply compiling our code to "),Yp=d("a"),$p=m("WebAssembly"),Vp=m(" and serving our .wasm file as a static asset, without any extra work! WebAssembly is super cool; it lets you run low level code at almost native speed on the web!"),Kp=k(),Qp=d("p"),Jp=m("As for multiplayer, "),Zp=d("a"),Xp=m("websockets"),ar=m(" allow for two-way communication between the server and client, enabling features such as realtime chat."),sr=k(),nr=d("p"),er=m("The whole setup is hosted on DigitalOcean using their free $100 signup credit, with SSL certs from cloudflare."),tr=k(),or=d("h3"),ir=m("Time Sink"),pr=k(),rr=d("p"),cr=m("So this project ended up taking waaaay longer than I thought it would. I expected a month max, but it turns out chess engines are really complicated."),lr=k(),hr=d("p"),ur=m("Here is a screenshot of my git history:"),dr=k(),mr=d("img"),gr=k(),fr=d("p"),wr=m("As you can see, I started this project in early March, and just barely finished in July. I had no idea what I was getting into, but in the end I’m happy with how it came out. I rewrote the chess engine ~3 times, each time using more advanced chess-engine-specific techniques."),br=k(),yr=d("p"),vr=m("There are still a lot of features that would be nice to have, but it’s definitely a usable product."),Er=k(),Ir=d("p"),Pr=m("Nice-to-have-but-not-implemented list:"),Tr=k(),Ar=d("ul"),xr=d("li"),Sr=m("Account system"),Lr=k(),Hr=d("li"),Mr=m("Game history"),Rr=k(),Wr=d("li"),jr=m("Pre-set maps/pieces"),Cr=k(),Nr=d("p"),qr=m("Sidenote: Sometime during the semester, while I was at the gym with Aiden Padilla (not to be confused with Aidan Chambers, the chess boy), between our mindless Spongebob quotes that we spew between sets, we made an agreement that I’d finish the website and that he’d finish his e-bike project by the end of the semester, or else we’d owe each other $5. Well I think between the coronavirus situation and him moving out to Washington, we both failed that challenge. (@Padilla wheres the e-bike tho)"),_r=k(),Or=d("chambers"),zr=m("And Chambers: if you’re reading this, I formally challenge you to a game of protochess.\n"),Gr=d("p"),Dr=m("What is protochess?"),Fr=k(),Br=d("p"),Ur=m("I’m glad you asked, Chambers. You aren’t ready for this one."),Yr=k(),$r=d("p"),Vr=m("You might’ve had years of training with your grandfather, but I have "),Kr=d("em"),Qr=m("6 months worth of training by myself"),Jr=m(" most of that time programming instead of playing chess. Message me when you’re ready."),Zr=k(),Xr=d("h2"),ac=m("The bigger picture"),sc=k(),nc=d("p"),ec=m("There’s something really satisfying about writing a program that beats you in your own game. Recently I watched the "),tc=d("a"),oc=m("AlphaGo documentary"),ic=m(" with Cami, and it’s absolutely incredible. These professional Go players devote their entire lives to improving at the game, which for a long time was considered impossible to write good engines for. That is until AlphaGo came and beat the number one Go player in the world, Lee Sedol."),pc=k(),rc=d("p"),cc=m("And that documentary was about an event that happened four years ago! Now, not only have the AlphaGo team beaten themselves with AlphaGo Zero, similar tech is being used to identify diseases, develop self-driving cars, and change how we do things in almost every field."),lc=k(),hc=d("p"),uc=m("Sometimes that change isn’t always good, though. I think it’s easy for those within tech to focus solely on the advancement of technology without considering the ethical consequences of their work. "),dc=d("a"),mc=m("Take for instance the case of Robert Julian-Borchak Williams"),kc=m(", who was wrongfully accused for a felony because of the implicit biases within facial recognition technology (which, by the way, is really accurate for white people but not so much minorities). I’m sure none of the engineers behind the technology wanted to target minorities, but the intent doesn’t change the outcome. Without proper auditing of the datasets that we’re using, mistakes like these are bound to happen. "),gc=d("a"),fc=m("(Yes, even to MIT.)"),wc=k(),bc=d("p"),yc=m("It’s all fun and games making the computer go beep boop until someone gets hurt."),vc=k(),Ec=d("p"),Ic=m("Along the same lines, as consumers of technology we should be mindful of the data that tech companies collect and what they do with it. It’s no surprise that companies sell your data for profit, but I find that most of us don’t know the extent of what they record and what they don’t. "),Pc=d("a"),Tc=m("TikTok was recently caught recording users’ clipboard information without consent"),Ac=m(", among other previous security concerns. This is just one company — how many more are there?"),xc=k(),Sc=d("p"),Lc=m("You know how it can be harder to write a paper when you have someone sitting behind you watching you type every word? "),Hc=d("a"),Mc=m("That happens digitally too"),Rc=m(". Being under constant surveillance can and will hinder your ability for creative thought."),Wc=k(),jc=d("p"),Cc=m("But maybe you don’t care. You have nothing to hide, and the TikTok dances are pretty cool so you want to keep watching them."),Nc=k(),qc=d("p"),_c=m("What if these companies start asking for more? What if a health insurance company saw that you watched a lot of TV, so they decide to raise your rates because your inactive lifestyle puts you at greater risk for health problems? "),Oc=d("a"),zc=m("No, nevermind, you’re right that’ll never happen"),Gc=m("."),Dc=k(),Fc=d("p"),Bc=m("Maybe it is all just harmless advertising. For now."),Uc=k(),Yc=d("p"),$c=d("a"),Vc=m("But just because it isn’t happening to you right now, doesn’t mean it can’t happen"),Kc=m("."),Qc=k(),Jc=d("p"),Zc=m("There’s a lot more to say about this but here are some closing thoughts: Be a little more mindful of the technology that you use and especially the privacy policies behind them. Do you really need to have TikTok installed?"),Xc=k(),al=d("p"),sl=m("…Also, play on my chess website :)"),nl=k(),el=d("img"),ol=k(),il=d("img"),rl=k(),cl=d("p"),ll=d("a"),hl=m("Protochess.com"),ul=k(),dl=d("p"),ml=d("a"),kl=m("github.com/raytran/protochess"),this.h()},l(a){s=g(a,"DIV",{class:!0,role:!0});var d=f(s);n=g(d,"H4",{class:!0});var m=f(n);e=w(m,"Note"),m.forEach(b),t=w(d,"\n  This post was originally on the MIT Admissions website as a guest blogpost. If you want, you can read it on the MIT Admission site "),o=g(d,"A",{href:!0});var k=f(o);i=w(k,"here"),k.forEach(b),p=w(d,"."),d.forEach(b),r=y(a),c=g(a,"H1",{});var v=f(c);l=w(v,M),v.forEach(b),h=y(a),u=g(a,"H2",{});var E=f(u);x=w(E,R),E.forEach(b),S=y(a),L=g(a,"P",{});var I=f(L);H=g(I,"A",{href:!0,rel:!0});var P=f(H);W=w(P,"PROTOCHESS.COM"),P.forEach(b),I.forEach(b),j=y(a),C=g(a,"P",{});var T=f(C);N=w(T,"TLDR: I made this chess website that lets you design custom pieces and boards. Play on it "),q=g(T,"A",{href:!0,rel:!0});var A=f(q);_=w(A,"here"),A.forEach(b),O=w(T,". You can play against the chess engine I wrote as well."),T.forEach(b),z=y(a),G=g(a,"DIV",{style:!0});var F=f(G);D=g(F,"IFRAME",{src:!0,frameborder:!0,style:!0}),f(D).forEach(b),F.forEach(b),B=y(a),U=g(a,"H2",{});var Is=f(U);Y=w(Is,"The Inspiration"),Is.forEach(b),$=y(a),V=g(a,"P",{});var ii=f(V);K=w(ii,"CPW. 2019. I was a but a lowly prefrosh making friends. I met Chambers. You might’ve heard of him. He’s that guy from the "),Q=g(ii,"A",{href:!0,rel:!0});var kr=f(Q);J=w(kr,"Duolingo thing"),kr.forEach(b),Z=w(ii,"."),ii.forEach(b),X=y(a),aa=g(a,"P",{});var tl=f(aa);sa=w(tl,"He challenged me to a game of chess. Aidan Chambers, the chess man. He was born from chess. Years of generational chess experience flows through his veins. Me? Raymond Tran? I haven’t played chess in years. Yet there I was, ready to challenge the one and only Aidan Chambers. Long story short he made some terrible mistake and I won."),tl.forEach(b),na=y(a),ea=g(a,"P",{});var pl=f(ea);ta=w(pl,"This didn’t phase me. But I know it hurt him. From this he would never recover. His chess confidence was destroyed. I broke him that day."),pl.forEach(b),oa=y(a),ia=g(a,"P",{});var gl=f(ia);pa=w(gl,"Now he won’t stop talking about chess. Like a broken record. Since then, he’s been training his chess ability. Little does he know: so have I."),gl.forEach(b),ra=y(a),ca=g(a,"P",{});var fl=f(ca);la=w(fl,"For the past six months I have been secretly training in chess with hopes to beat Aidan Chambers yet again. During this time, I learned about the existence of chess variants: chess games with modified pieces and boards. I couldn’t find a website that let you build these yourself, so I did what any rational person would: devote the next six months of my life to writing a chess variant website."),fl.forEach(b),ha=y(a),ua=g(a,"P",{});var wl=f(ua);da=w(wl,"This blogpost is the story of how I wrote that website. Play on it "),ma=g(wl,"A",{href:!0,rel:!0});var bl=f(ma);ka=w(bl,"here"),bl.forEach(b),ga=w(wl,". The story of me vs Chambers in our ultimate chess battle? That story is to be continued…."),wl.forEach(b),fa=y(a),wa=g(a,"H2",{});var yl=f(wa);ba=w(yl,"Engine"),yl.forEach(b),ya=y(a),va=g(a,"P",{});var vl=f(va);Ea=w(vl,"Behind every good chess website is a chess engine. This is the program that determines the rules behind chess and which moves are the best for any given board. Chess engines usually work by searching through all possible moves and picking the best one (the newer, machine-learning based chess engines are the exception). This sounds simple, and it is! Modern chess engines just use a lot of optimizations to be able to search deeper into the game tree."),vl.forEach(b),Ia=y(a),Pa=g(a,"P",{});var El=f(Pa);Ta=w(El,"Sidenote: I think "),Aa=g(El,"A",{href:!0,rel:!0});var Il=f(Aa);xa=w(Il,"6.172"),Il.forEach(b),Sa=w(El," makes you write a chess engine for a chess variant called Leiserchess, but I haven’t taken that class yet so I could be wrong. I imagine a lot of the techniques I’m about to describe are also used in that class."),El.forEach(b),La=y(a),Ha=g(a,"P",{});var Pl=f(Ha);Ma=w(Pl,"Anyway:"),Pl.forEach(b),Ra=y(a),Wa=g(a,"P",{});var Tl=f(Wa);ja=w(Tl,"What goes into a (basic) chess engine?"),Tl.forEach(b),Ca=y(a),Na=g(a,"UL",{});var Al=f(Na);qa=g(Al,"LI",{});var xl=f(qa);_a=g(xl,"A",{href:!0});var Sl=f(_a);Oa=w(Sl,"Board Representation"),Sl.forEach(b),xl.forEach(b),za=y(Al),Ga=g(Al,"LI",{});var Ll=f(Ga);Da=g(Ll,"A",{href:!0});var Hl=f(Da);Fa=w(Hl,"Move Generation"),Hl.forEach(b),Ll.forEach(b),Ba=y(Al),Ua=g(Al,"LI",{});var Ml=f(Ua);Ya=g(Ml,"A",{href:!0});var Rl=f(Ya);$a=w(Rl,"Evaluation"),Rl.forEach(b),Ml.forEach(b),Va=y(Al),Ka=g(Al,"LI",{});var Wl=f(Ka);Qa=g(Wl,"A",{href:!0});var jl=f(Qa);Ja=w(jl,"Search"),jl.forEach(b),Wl.forEach(b),Al.forEach(b),Za=y(a),Xa=g(a,"H2",{});var Cl=f(Xa);as=w(Cl,"Board Representation"),Cl.forEach(b),ss=y(a),ns=g(a,"P",{});var Nl=f(ns);es=w(Nl,"Note: Protochess supports up to 16×16 sized boards and custom pieces that do crazy things, but for the purposes of this article I’ll be writing as if it were just a standard chess game. I will include a few sentences on where protochess differs in the approach, though."),Nl.forEach(b),ts=y(a),os=g(a,"P",{});var ql=f(os);is=w(ql,"The first step to writing your own chess program is picking a way to represent your board. A natural approach would be something like this:"),ql.forEach(b),ps=y(a),rs=g(a,"PRE",{class:!0}),f(rs).forEach(b),cs=y(a),ls=g(a,"P",{});var _l=f(ls);hs=w(_l,"A single array, with a character for each piece. Upper case for white, lowercase for black. This is called a square-centric approach, since we keep information based on the squares on the board."),_l.forEach(b),us=y(a),ds=g(a,"P",{});var Ol=f(ds);ms=w(Ol,"Cool, but a little too slow for our purposes. Remember: it’s essential that we do everything as fast as possible to have a good engine."),Ol.forEach(b),ks=y(a),gs=g(a,"P",{});var zl=f(gs);fs=w(zl,"We can use a trick! Computers are really good at doing math with 64 bit integers. 64 just happens to be the number of squares on a standard chess board! Funny coincidence. Knowing this, we can represent our pieces like this:"),zl.forEach(b),ws=y(a),bs=g(a,"P",{});var Gl=f(bs);ys=w(Gl,"Let’s call each 64 bit number a bitboard. A bitboard is just a mapping from bits in the number to places on the board. We can do this in a number of ways, but in protochess this is done using little-endian rank-file mapping. It looks like this:"),Gl.forEach(b),vs=y(a),Es=g(a,"IMG",{alt:!0,style:!0,src:!0}),Ps=y(a),Ts=g(a,"P",{});var Dl=f(Ts);As=g(Dl,"A",{href:!0,rel:!0});var Fl=f(As);xs=w(Fl,"image source"),Fl.forEach(b),Dl.forEach(b),Ss=y(a),Ls=g(a,"P",{});var Bl=f(Ls);Hs=w(Bl,"Notice that the 0th bit is on the A1 square, and the 63rd bit is on the H8 square."),Bl.forEach(b),Ms=y(a),Rs=g(a,"P",{});var Ul=f(Rs);Ws=w(Ul,"We can represent the a board using one bitboard per piece type. We will have 12 in total (one for each piece type and color == 2x pawn, 2x knight, 2x king, 2x queen, 2x rook, 2x bishop)"),Ul.forEach(b),js=y(a),Cs=g(a,"P",{});var Yl=f(Cs);Ns=w(Yl,"In each bitboard, set the bit to 1 if the piece is there, and 0 if the piece isn’t."),Yl.forEach(b),qs=y(a),_s=g(a,"P",{});var $l=f(_s);Os=w($l,"For instance, if our board looks like this:"),$l.forEach(b),zs=y(a),Gs=g(a,"PRE",{class:!0}),f(Gs).forEach(b),Ds=y(a),Fs=g(a,"P",{});var Vl=f(Fs);Bs=w(Vl,"The corresponding bitboard for the white pawns looks like this:"),Vl.forEach(b),Us=y(a),Ys=g(a,"PRE",{class:!0}),f(Ys).forEach(b),$s=y(a),Vs=g(a,"P",{});var Kl=f(Vs);Ks=w(Kl,"Pretty simple huh? In contrast to the earlier array-based design, this is a piece-centric approach, since we focus on each piece type as a set of locations."),Kl.forEach(b),Qs=y(a),Js=g(a,"P",{});var Ql=f(Js);Zs=w(Ql,"We have a few advantages here, especially when you consider bitwise operations that computers can do."),Ql.forEach(b),Xs=y(a),an=g(a,"P",{});var Jl=f(an);sn=w(Jl,"One of them is the AND (&): "),nn=g(Jl,"CODE",{});var Zl=f(nn);en=w(Zl,"let c = (a & b)"),Zl.forEach(b),tn=w(Jl," takes two numbers a, b, and returns a new number c where each bit in c is true if the corresponding bits in a and b are true.\nUsing this representation, we can perform really powerful set-wise operations, such as asking “give me all the white pawns standing on the second rank.” In our array representation, we’d have to search through 8 indices, while now, we can write "),on=g(Jl,"CODE",{});var Xl=f(on);pn=w(Xl,"(WHITE_PAWNS & 2ND_RANK)"),Xl.forEach(b),rn=w(Jl,"."),Jl.forEach(b),cn=y(a),ln=g(a,"H2",{});var ah=f(ln);hn=w(ah,"Move Generation"),ah.forEach(b),un=y(a),dn=g(a,"P",{});var sh=f(dn);mn=w(sh,"This is the game of chess itself, with all its moves and rules. While it’s simple in theory, it is actually the hardest part about writing an (efficient) chess engine."),sh.forEach(b),kn=y(a),gn=g(a,"P",{});var nh=f(gn);fn=w(nh,"In chess, there are two types of pieces: jumping pieces and sliding pieces. Jumping pieces like the knight can “jump” over other pieces, while sliding pieces like the queen can have their movement blocked. Move generation for sliding and jumping pieces can be done very efficiently using bitboards."),nh.forEach(b),wn=y(a),bn=g(a,"H3",{});var eh=f(bn);yn=w(eh,"Jumping pieces (knight, pawn, king)"),eh.forEach(b),vn=y(a),En=g(a,"P",{});var th=f(En);In=w(th,"The fastest way to generate moves for any piece is to just look up the possible moves in a precomputed table. For jumping pieces, this is easy since we don’t have to consider any blockers in the way."),th.forEach(b),Pn=y(a),Tn=g(a,"P",{});var oh=f(Tn);An=w(oh,"At the start of our program, we initialize a huge table for jumping pieces (like the knight), mapping board locations (indices) to possible movements (as a Bitboard). We can use bit manipulation (bit shifts, masks) to set bits in the relevant locations for each jumping piece table."),oh.forEach(b),xn=y(a),Sn=g(a,"P",{});var ih=f(Sn);Ln=w(ih,"Then, during our program, we can access the movement by indexing the table. For instance, a knight sitting at C3 can be indexed like this:"),ih.forEach(b),Hn=y(a),Mn=g(a,"PRE",{class:!0}),f(Mn).forEach(b),Rn=y(a),Wn=g(a,"P",{});var ph=f(Wn);jn=w(ph,"(For clarity, . is used instead of 0 and the C3 square is marked with an x instead of 0)."),ph.forEach(b),Cn=y(a),Nn=g(a,"P",{});var rh=f(Nn);qn=w(rh,"It’s important to remember that these are just possible squares that we can move to. We don’t want to attack our own pieces, for instance.\nThis is where our choice of bitboards really shines. We can “block out” invalid moves like attacking your own pieces with simple bitwise operations, like so:"),rh.forEach(b),_n=y(a),On=g(a,"PRE",{class:!0}),f(On).forEach(b),zn=y(a),Gn=g(a,"P",{});var ch=f(Gn);Dn=w(ch,"With a few adjustments, it’s easy to see how the scheme above works for all jumping pieces (kings, pawns)."),ch.forEach(b),Fn=y(a),Bn=g(a,"H3",{});var lh=f(Bn);Un=w(lh,"Sliding pieces"),lh.forEach(b),Yn=y(a),$n=g(a,"P",{});var hh=f($n);Vn=w(hh,"Sliding pieces are a little more complicated. It is possible to use a similar approach as jumping pieces, but we would need a lot of memory and a few tricks (See: "),Kn=g(hh,"A",{href:!0,rel:!0});var uh=f(Kn);Qn=w(uh,"magic bitboards"),uh.forEach(b),Jn=w(hh,". Protochess, with it’s focus on having 16×16 sized customizable boards would need a LOT of memory."),hh.forEach(b),Zn=y(a),Xn=g(a,"P",{});var dh=f(Xn);ae=w(dh,"So instead, let’s think about what you really need to determine the possible moves for a sliding piece."),dh.forEach(b),se=y(a),ne=g(a,"PRE",{class:!0}),f(ne).forEach(b),ee=y(a),te=g(a,"P",{});var mh=f(te);oe=w(mh,"This is the minimum amount of information that we need to determine moves. For a standard chess game, we have up to 2^8 possible occupancies, which looks something like this:"),mh.forEach(b),ie=y(a),pe=g(a,"PRE",{class:!0}),f(pe).forEach(b),re=y(a),ce=g(a,"P",{});var kh=f(ce);le=w(kh,"We can actually loop through all possible occupancy states like so:"),kh.forEach(b),he=y(a),ue=g(a,"PRE",{class:!0}),f(ue).forEach(b),de=y(a),me=g(a,"P",{});var gh=f(me);ke=w(gh,"..and precalculate sliding moves for each state! We can store our results in a table like so:"),gh.forEach(b),ge=y(a),fe=g(a,"PRE",{class:!0}),f(fe).forEach(b),we=y(a),be=g(a,"P",{});var fh=f(be);ye=w(fh,"All we need now is a way to map each direction (rank, file, diagonal, antidiagonal) to and from the relevant 8 bits. We can use the first rank as a place to extract our relevant bits from the bitboard."),fh.forEach(b),ve=y(a),Ee=g(a,"P",{});var wh=f(Ee);Ie=w(wh,"Say we have a rook on C3 (marked as x) and we want to know where it can go (looking at only the horizontal direction), given the blockers on the board (marked as 1):"),wh.forEach(b),Pe=y(a),Te=g(a,"PRE",{class:!0}),f(Te).forEach(b),Ae=y(a),xe=g(a,"PRE",{class:!0}),f(xe).forEach(b),Se=y(a),Le=g(a,"PRE",{class:!0}),f(Le).forEach(b),He=y(a),Me=g(a,"P",{});var bh=f(Me);Re=w(bh,"Now we can use the bits at the first rank to index into our table:"),bh.forEach(b),We=y(a),je=g(a,"PRE",{class:!0}),f(je).forEach(b),Ce=y(a),Ne=g(a,"P",{});var yh=f(Ne);qe=w(yh,"…And we can map these 8 bits onto the first rank of a bitboard and shift it back up using the same operations in reverse, giving us:"),yh.forEach(b),_e=y(a),Oe=g(a,"PRE",{class:!0}),f(Oe).forEach(b),ze=y(a),Ge=g(a,"P",{});var vh=f(Ge);De=w(vh,"…which are the possible moves for our rook on C3! Hooray!"),vh.forEach(b),Fe=y(a),Be=g(a,"P",{});var Eh=f(Be);Ue=w(Eh,"Similar operations can be done to map between diagonals and the first rank. Again, we need to mask off this bitboard the same way we did earlier to ensure that we don’t attack our own pieces."),Eh.forEach(b),Ye=y(a),$e=g(a,"P",{});var Ih=f($e);Ve=w(Ih,"We’re still missing one key aspect: How do we get our moves “out” of a bitboard?"),Ih.forEach(b),Ke=y(a),Qe=g(a,"P",{});var Ph=f(Qe);Je=w(Ph,"Simple, just loop through them like so:"),Ph.forEach(b),Ze=y(a),Xe=g(a,"PRE",{class:!0}),f(Xe).forEach(b),at=y(a),st=g(a,"P",{});var Th=f(st);nt=w(Th,"Apart from the standard rules like encoding how all the pieces move, you also have to consider rules such as the en-passant, castling, and promotions, but these don’t have any fancy tricks like above so I won’t mention it."),Th.forEach(b),et=y(a),tt=g(a,"H3",{});var Ah=f(tt);ot=w(Ah,"Testing your move generation"),Ah.forEach(b),it=y(a),pt=g(a,"P",{});var xh=f(pt);rt=g(xh,"EM",{});var Sh=f(rt);ct=w(Sh,"Question"),Sh.forEach(b),lt=w(xh,": How do you make sure your move generation is correct? There are so many possible moves, with so many possible boards and responses?"),xh.forEach(b),ht=y(a),ut=g(a,"P",{});var Lh=f(ut);dt=g(Lh,"EM",{});var Hh=f(dt);mt=w(Hh,"Answer:"),Hh.forEach(b),kt=w(Lh," Use perft! This is a function that you write into your chess engine that walks through the game tree, move by move, and recursively counts through all possible moves up to a certain depth. It looks like:"),Lh.forEach(b),gt=y(a),ft=g(a,"PRE",{class:!0}),f(ft).forEach(b),wt=y(a),bt=g(a,"P",{});var Mh=f(bt);yt=w(Mh,"For example, perft(0) on the starting position gives us 20, since there are 20 possible moves white can make (2 per pawn, 2 per knight). perft(1) = 40, since the sides are symmetric."),Mh.forEach(b),vt=y(a),Et=g(a,"P",{});var Rh=f(Et);It=w(Rh,"Here are some more perft values at the starting position:"),Rh.forEach(b),Pt=y(a),Tt=g(a,"PRE",{class:!0}),f(Tt).forEach(b),At=y(a),xt=g(a,"P",{});var Wh=f(xt);St=g(Wh,"A",{href:!0,rel:!0});var jh=f(St);Lt=w(jh,"Full list here"),jh.forEach(b),Wh.forEach(b),Ht=y(a),Mt=g(a,"P",{});var Ch=f(Mt);Rt=w(Ch,"Don’t you just love exponential growth? Chess actually has a branching factor of around 35, meaning there are more possible chess positions "),Wt=g(Ch,"CODE",{});var Nh=f(Wt);jt=w(Nh,"(10^120)"),Nh.forEach(b),Ct=w(Ch," than atoms in the universe "),Nt=g(Ch,"CODE",{});var qh=f(Nt);qt=w(qh,"(10^81)"),qh.forEach(b),_t=w(Ch,"."),Ch.forEach(b),Ot=y(a),zt=g(a,"P",{});var _h=f(zt);Gt=w(_h,"Writing a good move generator legitimately took me months (mostly because I didn’t know what I was doing yet). I ended up rewriting this several times, unsatisfied with the performance of each. The first couple tries were in C++, and my time for perft(6) was 5+ minutes on my computer. This was because of a slow move generation algorithm–math instead of lookup tables, and because I was using a slow 256 bit number library (big boards big challenges big thoughts)."),_h.forEach(b),Dt=y(a),Ft=g(a,"P",{});var Oh=f(Ft);Bt=w(Oh,"I eventually settled on a final rewrite in Rust, using a faster 256 bit number library and the generation scheme described above, which is providing me with decent speed and efficiency. Perft(6) on the starting position finishes in less than three seconds now. Much better!"),Oh.forEach(b),Ut=y(a),Yt=g(a,"H2",{});var zh=f(Yt);$t=w(zh,"Evaluation"),zh.forEach(b),Vt=y(a),Kt=g(a,"P",{});var Gh=f(Kt);Qt=w(Gh,"Evaluation is the process of assigning the board a score. It allows the engine to determine what a “good” position means. The score itself is the sum of the player to move’s "),Jt=g(Gh,"STRONG",{});var Dh=f(Jt);Zt=w(Dh,"material score"),Dh.forEach(b),Xt=w(Gh," and "),ao=g(Gh,"STRONG",{});var Fh=f(ao);so=w(Fh,"positional score"),Fh.forEach(b),no=w(Gh,"."),Gh.forEach(b),eo=y(a),to=g(a,"P",{});var Bh=f(to);oo=w(Bh,"The "),io=g(Bh,"STRONG",{});var Uh=f(io);po=w(Uh,"material score"),Uh.forEach(b),ro=w(Bh," is just the amount of material that either side has. Protochess measures material in centipawns, which is 1/100ths of a pawn. Using this model, here are the centipawn values for each standard piece:"),Bh.forEach(b),co=y(a),lo=g(a,"PRE",{class:!0}),f(lo).forEach(b),ho=y(a),uo=g(a,"P",{});var Yh=f(uo);mo=w(Yh,"As you can see, we add a bonus for castling moves, while getting checkmated essentially means having -INF score.\nThis works fine for the pieces in a standard chess game, but the whole point of protochess is to design your own pieces, so how do we score those?"),Yh.forEach(b),ko=y(a),go=g(a,"P",{});var $h=f(go);fo=w($h,"At the moment, the score for each custom piece is determined as the sum of possible moves that each piece has. For instance, if a piece can move north and south, the score for that piece is simply "),wo=g($h,"CODE",{});var Vh=f(wo);bo=w(Vh,"[northScore + southScore]"),Vh.forEach(b),yo=w($h,"."),$h.forEach(b),vo=y(a),Eo=g(a,"P",{});var Kh=f(Eo);Io=w(Kh,"The other part of the evaluation score is the "),Po=g(Kh,"STRONG",{});var Qh=f(Po);To=w(Qh,"positional score"),Qh.forEach(b),Ao=w(Kh,". Having more pieces than your opponent is important, but so is where those pieces are. It wouldn’t be very good to have all your pieces stuck behind your pawns (called piece development). Normal engines handle this by defining piece-square tables, which are big arrays mapping each tile to a certain point value for each piece."),Kh.forEach(b),xo=y(a),So=g(a,"P",{});var Jh=f(So);Lo=w(Jh,"Here is an example table for white pawns taken from the chess programming wiki:"),Jh.forEach(b),Ho=y(a),Mo=g(a,"PRE",{class:!0}),f(Mo).forEach(b),Ro=y(a),Wo=g(a,"P",{});var Zh=f(Wo);jo=w(Zh,"As you can see, pawns are encouraged to stay in the middle and progress towards the 7th/8th rank so that they can promote."),Zh.forEach(b),Co=y(a),No=g(a,"P",{});var Xh=f(No);qo=w(Xh,"This works fine for normal chess, but again protochess is designed to not be normal chess. We can design custom boards of up to 16×16 tiles, so pre-set piece square tables won’t be very useful here. To get around this, piece square tables are generated dynamically for each piece by counting the possible number of moves for each piece on an otherwise empty board. This retains some properties like encouraging pieces to move towards the center (since pieces typically have more moves at the center), but it misses when you try to add things like king safety and pawn structure."),Xh.forEach(b),_o=y(a),Oo=g(a,"P",{});var au=f(Oo);zo=w(au,"At the moment, this seems to be good enough to beat your casual chess player, but improvements can definitely be made."),au.forEach(b),Go=y(a),Do=g(a,"H2",{});var su=f(Do);Fo=w(su,"Search"),su.forEach(b),Bo=y(a),Uo=g(a,"P",{});var nu=f(Uo);Yo=w(nu,"Now on to the “AI” part of the chess engine. Despite the name, it really isn’t very intelligent. Computers are just dumb rocks that we’ve fooled into doing math."),nu.forEach(b),$o=y(a),Vo=g(a,"P",{});var eu=f(Vo);Ko=w(eu,"Here’s how it works:"),eu.forEach(b),Qo=y(a),Jo=g(a,"P",{});var tu=f(Jo);Zo=w(tu,"At its core the search is a highly optimized version of the minimax algorithm. This algorithm walks through the game tree up to a certain depth, assuming that each player plays optimally. It picks the branch that provides the most benefit to us, while minimizing the benefit of the opposing player."),tu.forEach(b),Xo=y(a),ai=g(a,"P",{});var ou=f(ai);si=g(ou,"A",{href:!0,rel:!0});var iu=f(si);ni=w(iu,"Here’s a simplified diagram of that behavior"),iu.forEach(b),ei=w(ou,":"),ou.forEach(b),ti=y(a),oi=g(a,"IMG",{alt:!0,style:!0,src:!0}),pi=y(a),ri=g(a,"P",{});var pu=f(ri);ci=w(pu,"Here is that framework applied in a negamax version, which takes advantage of the fact that if black is up by 5 points, then the overall evaluation is just -1 * 5 (hence the name Nega(tive)-(min)max)."),pu.forEach(b),li=y(a),hi=g(a,"PRE",{class:!0}),f(hi).forEach(b),ui=y(a),di=g(a,"P",{});var ru=f(di);mi=w(ru,"Now, if you were to build a chess algorithm using a plain min/max with no optimizations, it would still play decent chess, but would likely only be able to search up to 3 ply (3 moves ahead) in a reasonable amount of time. In comparison, the protochess engine currently searches to around 10 ply in ~5s on my machine. For reference, Stockfish regularly searches to 20+ ply using even more optimizations."),ru.forEach(b),ki=y(a),gi=g(a,"P",{});var cu=f(gi);fi=w(cu,"Here’s a list of search optimizations that the protochess engine includes:"),cu.forEach(b),wi=y(a),bi=g(a,"UL",{});var lu=f(bi);yi=g(lu,"LI",{});var hu=f(yi);vi=w(hu,"Alpha-beta pruning "),Ei=g(hu,"UL",{});var uu=f(Ei);Ii=g(uu,"LI",{});var du=f(Ii);Pi=w(du,"The idea here is to stop searching moves that automatically lead to a bad position. This is similar to how humans play chess; if we see a move that immedietely leads to a lost position, we naturally stop searching moves that come after it."),du.forEach(b),Ti=y(uu),Ai=g(uu,"LI",{});var mu=f(Ai);xi=w(mu,"Alpha-beta pruning alone guarantees the same end results as min/max, just with less work done."),mu.forEach(b),Si=y(uu),Li=g(uu,"LI",{});var ku=f(Li);Hi=w(ku,"It’s easy to see how if we search better moves first, we are more likely to find a good variation that results in more cutoffs. So much so, that with perfect move ordering, if minmax searches x nodes, then we can expect an alpha-beta search to search only sqrt(x) nodes!"),ku.forEach(b),uu.forEach(b),hu.forEach(b),Mi=y(lu),Ri=g(lu,"LI",{});var gu=f(Ri);Wi=w(gu,"Quiescence search"),ji=g(gu,"UL",{});var fu=f(ji);Ci=g(fu,"LI",{});var wu=f(Ci);Ni=w(wu,"Searches can suffer from the horizon effect, which happens when a search reaches its maximum depth but still doesn’t know enough about a position to accurately rate its moves. For instance, at the last depth of a search the engine can find a move that appears good but actually leads to the Queen being lost. To fix this, we simply switch to a Quiescence search (quiet search), meaning we keep searching using only capture moves until we run out of capture moves to make. This solves our problem of dropping pieces and results in a much more reliable engine."),wu.forEach(b),fu.forEach(b),gu.forEach(b),qi=y(lu),_i=g(lu,"LI",{});var bu=f(_i);Oi=w(bu,"Principal Variation Search"),zi=g(bu,"UL",{});var yu=f(zi);Gi=g(yu,"LI",{});var vu=f(Gi);Di=w(vu,"This search method takes advantage of the fact that it’s easier to prove a move is bad than it is to calculate the full score of a move, so we search the first moves in our list fully, and reduce the search window for subsequent searches."),vu.forEach(b),yu.forEach(b),bu.forEach(b),Fi=y(lu),Bi=g(lu,"LI",{});var Eu=f(Bi);Ui=w(Eu,"MVV-LVA Move ordering"),Yi=g(Eu,"UL",{});var Iu=f(Yi);$i=g(Iu,"LI",{});var Pu=f($i);Vi=w(Pu,"This stands for most-valuable-victim, least-valuable-attacker move ordering. As described above, alpha beta search benefits massively from a good search order. MVV-LVA sorts the moves in each ply to help ensure a good ordering."),Pu.forEach(b),Iu.forEach(b),Eu.forEach(b),Ki=y(lu),Qi=g(lu,"LI",{});var Tu=f(Qi);Ji=w(Tu,"Killer + History Heuristic"),Zi=g(Tu,"UL",{});var Au=f(Zi);Xi=g(Au,"LI",{});var xu=f(Xi);ap=w(xu,"These heuristics store moves that caused cutoffs in the past, and whenever the engine encounters them again, the moves are ranked higher in the move ordering."),xu.forEach(b),Au.forEach(b),Tu.forEach(b),sp=y(lu),np=g(lu,"LI",{});var Su=f(np);ep=w(Su,"Null move pruning"),tp=g(Su,"UL",{});var Lu=f(tp);op=g(Lu,"LI",{});var Hu=f(op);ip=w(Hu,"Most of the time, the worst thing you can do in chess is to pass (with some exceptions). As such, null move pruning makes a “null move” (skips turn), and if the engine still can’t find a move that improves the opponent score (beta cutoff), then we know we can ignore the branch."),Hu.forEach(b),Lu.forEach(b),Su.forEach(b),pp=y(lu),rp=g(lu,"LI",{});var Mu=f(rp);cp=w(Mu,"Late move reductions"),lp=g(Mu,"UL",{});var Ru=f(lp);hp=g(Ru,"LI",{});var Wu=f(hp);up=w(Wu,"Since our move ordering is pretty good at this point, we can search later moves with reduced depth. This can dramatically improve search depth, but care must be taken to ensure that our search still remains stable."),Wu.forEach(b),Ru.forEach(b),Mu.forEach(b),dp=y(lu),mp=g(lu,"LI",{});var ju=f(mp);kp=w(ju,"Transposition table with Zobrist Hashing"),gp=g(ju,"UL",{});var Cu=f(gp);fp=g(Cu,"LI",{});var Nu=f(fp);wp=w(Nu,"A zobrist hash is a number assigned to a particular board position. It is used similarly to an ID; it is supposed to be unique to the position.\n– These numbers are used to index a big hashtable of positions, where we store information between searches."),Nu.forEach(b),Cu.forEach(b),ju.forEach(b),bp=y(lu),yp=g(lu,"LI",{});var qu=f(yp);vp=w(qu,"Iterative deepening"),Ep=g(qu,"UL",{});var _u=f(Ep);Ip=g(_u,"LI",{});var Ou=f(Ip);Pp=w(Ou,"Iterative deepening just means that if we want to search to depth x, we first search to depth 1, then 2, then 3, then 4, up to x. At first glance, it may seem like doing a lot of extra work, but in reality the amount of time to search at lower depths is trivial, and it allows us to use information from the shallow searches to help us for our deeper searches (move ordering/transposition table). Additionally, we can stop early and use our low-depth results if we run out of time."),Ou.forEach(b),_u.forEach(b),qu.forEach(b),lu.forEach(b),Tp=y(a),Ap=g(a,"H2",{});var zu=f(Ap);xp=w(zu,"Online Play, Website, and Deployment"),zu.forEach(b),Sp=y(a),Lp=g(a,"P",{});var Gu=f(Lp);Hp=w(Gu,"Now for the website itself."),Gu.forEach(b),Mp=y(a),Rp=g(a,"P",{});var Du=f(Rp);Wp=w(Du,"The frontend was originally written using React, but after watching "),jp=g(Du,"A",{href:!0,rel:!0});var Fu=f(jp);Cp=w(Fu,"this video on svelte"),Fu.forEach(b),Np=w(Du," and seeing how simple it was, I switched immediately. Svelte has the added benefit of being a compiler, so the website only serves what it needs (without a virtual DOM). This basically means it should load pretty quickly, which fits the theme of this blog post quite well. I used the "),qp=g(Du,"A",{href:!0,rel:!0});var Bu=f(qp);_p=w(Bu,"Bulma css library"),Bu.forEach(b),Op=w(Du," to get things looking pretty."),Du.forEach(b),zp=y(a),Gp=g(a,"P",{});var Uu=f(Gp);Dp=w(Uu,"The backend also uses Rust, for no other reason than it seeming like the simplest solution to run our chess logic and webserver using the same language. Looking back, it would’ve been easier to use something like node.js with neon for rust bindings."),Uu.forEach(b),Fp=y(a),Bp=g(a,"P",{});var Yu=f(Bp);Up=w(Yu,"Since the engine is written in Rust, we can implement singleplayer by simply compiling our code to "),Yp=g(Yu,"A",{href:!0,rel:!0});var $u=f(Yp);$p=w($u,"WebAssembly"),$u.forEach(b),Vp=w(Yu," and serving our .wasm file as a static asset, without any extra work! WebAssembly is super cool; it lets you run low level code at almost native speed on the web!"),Yu.forEach(b),Kp=y(a),Qp=g(a,"P",{});var Vu=f(Qp);Jp=w(Vu,"As for multiplayer, "),Zp=g(Vu,"A",{href:!0,rel:!0});var Ku=f(Zp);Xp=w(Ku,"websockets"),Ku.forEach(b),ar=w(Vu," allow for two-way communication between the server and client, enabling features such as realtime chat."),Vu.forEach(b),sr=y(a),nr=g(a,"P",{});var Qu=f(nr);er=w(Qu,"The whole setup is hosted on DigitalOcean using their free $100 signup credit, with SSL certs from cloudflare."),Qu.forEach(b),tr=y(a),or=g(a,"H3",{});var Ju=f(or);ir=w(Ju,"Time Sink"),Ju.forEach(b),pr=y(a),rr=g(a,"P",{});var Zu=f(rr);cr=w(Zu,"So this project ended up taking waaaay longer than I thought it would. I expected a month max, but it turns out chess engines are really complicated."),Zu.forEach(b),lr=y(a),hr=g(a,"P",{});var Xu=f(hr);ur=w(Xu,"Here is a screenshot of my git history:"),Xu.forEach(b),dr=y(a),mr=g(a,"IMG",{alt:!0,style:!0,src:!0}),gr=y(a),fr=g(a,"P",{});var ad=f(fr);wr=w(ad,"As you can see, I started this project in early March, and just barely finished in July. I had no idea what I was getting into, but in the end I’m happy with how it came out. I rewrote the chess engine ~3 times, each time using more advanced chess-engine-specific techniques."),ad.forEach(b),br=y(a),yr=g(a,"P",{});var sd=f(yr);vr=w(sd,"There are still a lot of features that would be nice to have, but it’s definitely a usable product."),sd.forEach(b),Er=y(a),Ir=g(a,"P",{});var nd=f(Ir);Pr=w(nd,"Nice-to-have-but-not-implemented list:"),nd.forEach(b),Tr=y(a),Ar=g(a,"UL",{});var ed=f(Ar);xr=g(ed,"LI",{});var td=f(xr);Sr=w(td,"Account system"),td.forEach(b),Lr=y(ed),Hr=g(ed,"LI",{});var od=f(Hr);Mr=w(od,"Game history"),od.forEach(b),Rr=y(ed),Wr=g(ed,"LI",{});var id=f(Wr);jr=w(id,"Pre-set maps/pieces"),id.forEach(b),ed.forEach(b),Cr=y(a),Nr=g(a,"P",{});var pd=f(Nr);qr=w(pd,"Sidenote: Sometime during the semester, while I was at the gym with Aiden Padilla (not to be confused with Aidan Chambers, the chess boy), between our mindless Spongebob quotes that we spew between sets, we made an agreement that I’d finish the website and that he’d finish his e-bike project by the end of the semester, or else we’d owe each other $5. Well I think between the coronavirus situation and him moving out to Washington, we both failed that challenge. (@Padilla wheres the e-bike tho)"),pd.forEach(b),_r=y(a),Or=g(a,"CHAMBERS",{});var rd=f(Or);zr=w(rd,"And Chambers: if you’re reading this, I formally challenge you to a game of protochess.\n"),Gr=g(rd,"P",{});var cd=f(Gr);Dr=w(cd,"What is protochess?"),cd.forEach(b),Fr=y(rd),Br=g(rd,"P",{});var ld=f(Br);Ur=w(ld,"I’m glad you asked, Chambers. You aren’t ready for this one."),ld.forEach(b),Yr=y(rd),$r=g(rd,"P",{});var hd=f($r);Vr=w(hd,"You might’ve had years of training with your grandfather, but I have "),Kr=g(hd,"EM",{});var ud=f(Kr);Qr=w(ud,"6 months worth of training by myself"),ud.forEach(b),Jr=w(hd," most of that time programming instead of playing chess. Message me when you’re ready."),hd.forEach(b),rd.forEach(b),Zr=y(a),Xr=g(a,"H2",{});var dd=f(Xr);ac=w(dd,"The bigger picture"),dd.forEach(b),sc=y(a),nc=g(a,"P",{});var md=f(nc);ec=w(md,"There’s something really satisfying about writing a program that beats you in your own game. Recently I watched the "),tc=g(md,"A",{href:!0,rel:!0});var kd=f(tc);oc=w(kd,"AlphaGo documentary"),kd.forEach(b),ic=w(md," with Cami, and it’s absolutely incredible. These professional Go players devote their entire lives to improving at the game, which for a long time was considered impossible to write good engines for. That is until AlphaGo came and beat the number one Go player in the world, Lee Sedol."),md.forEach(b),pc=y(a),rc=g(a,"P",{});var gd=f(rc);cc=w(gd,"And that documentary was about an event that happened four years ago! Now, not only have the AlphaGo team beaten themselves with AlphaGo Zero, similar tech is being used to identify diseases, develop self-driving cars, and change how we do things in almost every field."),gd.forEach(b),lc=y(a),hc=g(a,"P",{});var fd=f(hc);uc=w(fd,"Sometimes that change isn’t always good, though. I think it’s easy for those within tech to focus solely on the advancement of technology without considering the ethical consequences of their work. "),dc=g(fd,"A",{href:!0,rel:!0});var wd=f(dc);mc=w(wd,"Take for instance the case of Robert Julian-Borchak Williams"),wd.forEach(b),kc=w(fd,", who was wrongfully accused for a felony because of the implicit biases within facial recognition technology (which, by the way, is really accurate for white people but not so much minorities). I’m sure none of the engineers behind the technology wanted to target minorities, but the intent doesn’t change the outcome. Without proper auditing of the datasets that we’re using, mistakes like these are bound to happen. "),gc=g(fd,"A",{href:!0,rel:!0});var bd=f(gc);fc=w(bd,"(Yes, even to MIT.)"),bd.forEach(b),fd.forEach(b),wc=y(a),bc=g(a,"P",{});var yd=f(bc);yc=w(yd,"It’s all fun and games making the computer go beep boop until someone gets hurt."),yd.forEach(b),vc=y(a),Ec=g(a,"P",{});var vd=f(Ec);Ic=w(vd,"Along the same lines, as consumers of technology we should be mindful of the data that tech companies collect and what they do with it. It’s no surprise that companies sell your data for profit, but I find that most of us don’t know the extent of what they record and what they don’t. "),Pc=g(vd,"A",{href:!0,rel:!0});var Ed=f(Pc);Tc=w(Ed,"TikTok was recently caught recording users’ clipboard information without consent"),Ed.forEach(b),Ac=w(vd,", among other previous security concerns. This is just one company — how many more are there?"),vd.forEach(b),xc=y(a),Sc=g(a,"P",{});var Id=f(Sc);Lc=w(Id,"You know how it can be harder to write a paper when you have someone sitting behind you watching you type every word? "),Hc=g(Id,"A",{href:!0,rel:!0});var Pd=f(Hc);Mc=w(Pd,"That happens digitally too"),Pd.forEach(b),Rc=w(Id,". Being under constant surveillance can and will hinder your ability for creative thought."),Id.forEach(b),Wc=y(a),jc=g(a,"P",{});var Td=f(jc);Cc=w(Td,"But maybe you don’t care. You have nothing to hide, and the TikTok dances are pretty cool so you want to keep watching them."),Td.forEach(b),Nc=y(a),qc=g(a,"P",{});var Ad=f(qc);_c=w(Ad,"What if these companies start asking for more? What if a health insurance company saw that you watched a lot of TV, so they decide to raise your rates because your inactive lifestyle puts you at greater risk for health problems? "),Oc=g(Ad,"A",{href:!0,rel:!0});var xd=f(Oc);zc=w(xd,"No, nevermind, you’re right that’ll never happen"),xd.forEach(b),Gc=w(Ad,"."),Ad.forEach(b),Dc=y(a),Fc=g(a,"P",{});var Sd=f(Fc);Bc=w(Sd,"Maybe it is all just harmless advertising. For now."),Sd.forEach(b),Uc=y(a),Yc=g(a,"P",{});var Ld=f(Yc);$c=g(Ld,"A",{href:!0,rel:!0});var Hd=f($c);Vc=w(Hd,"But just because it isn’t happening to you right now, doesn’t mean it can’t happen"),Hd.forEach(b),Kc=w(Ld,"."),Ld.forEach(b),Qc=y(a),Jc=g(a,"P",{});var Md=f(Jc);Zc=w(Md,"There’s a lot more to say about this but here are some closing thoughts: Be a little more mindful of the technology that you use and especially the privacy policies behind them. Do you really need to have TikTok installed?"),Md.forEach(b),Xc=y(a),al=g(a,"P",{});var Rd=f(al);sl=w(Rd,"…Also, play on my chess website :)"),Rd.forEach(b),nl=y(a),el=g(a,"IMG",{alt:!0,style:!0,src:!0}),ol=y(a),il=g(a,"IMG",{alt:!0,style:!0,src:!0}),rl=y(a),cl=g(a,"P",{});var Wd=f(cl);ll=g(Wd,"A",{href:!0,rel:!0});var jd=f(ll);hl=w(jd,"Protochess.com"),jd.forEach(b),Wd.forEach(b),ul=y(a),dl=g(a,"P",{});var Cd=f(dl);ml=g(Cd,"A",{href:!0,rel:!0});var Nd=f(ml);kl=w(Nd,"github.com/raytran/protochess"),Nd.forEach(b),Cd.forEach(b),this.h()},h(){v(n,"class","alert-heading"),v(o,"href","https://mitadmissions.org/blogs/entry/guest-post-how-to-write-a-chess-variant-website-in-six-months/"),v(s,"class","mt-10 alert alert-primary"),v(s,"role","alert"),v(H,"href","https://protochess.com"),v(H,"rel","nofollow"),v(q,"href","https://protochess.com"),v(q,"rel","nofollow"),E(D.src,F="https://www.youtube.com/embed/ddaMFWH6ppY")||v(D,"src","https://www.youtube.com/embed/ddaMFWH6ppY"),v(D,"frameborder","0"),D.allowFullscreen=!0,I(D,"position","absolute"),I(D,"top","0"),I(D,"left","0"),I(D,"width","100%"),I(D,"height","100%"),I(G,"position","relative"),I(G,"width","100%"),I(G,"height","0"),I(G,"padding-bottom","56.25%"),v(Q,"href","https://mitadmissions.org/blogs/entry/guest-post-duolingo-champion/"),v(Q,"rel","nofollow"),v(ma,"href","https://protochess.com"),v(ma,"rel","nofollow"),v(Aa,"href","https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-172-performance-engineering-of-software-systems-fall-2018/"),v(Aa,"rel","nofollow"),v(_a,"href","#board-representation"),v(Da,"href","#move-generation"),v(Ya,"href","#evaluation"),v(Qa,"href","#search"),v(rs,"class","language-rust"),v(Es,"alt","square mapping"),I(Es,"width","100%"),E(Es.src,Is="/protochess/square-mapping-considerations.png")||v(Es,"src","/protochess/square-mapping-considerations.png"),v(As,"href","https://www.chessprogramming.org/Square_Mapping_Considerations"),v(As,"rel","nofollow"),v(Gs,"class","language-rust"),v(Ys,"class","language-rust"),v(Mn,"class","language-rust"),v(On,"class","language-rust"),v(Kn,"href","https://www.chessprogramming.org/Magic_Bitboards"),v(Kn,"rel","nofollow"),v(ne,"class","language-undefined"),v(pe,"class","language-undefined"),v(ue,"class","language-rust"),v(fe,"class","language-rust"),v(Te,"class","language-rust"),v(xe,"class","language-rust"),v(Le,"class","language-rust"),v(je,"class","language-rust"),v(Oe,"class","language-undefined"),v(Xe,"class","language-rust"),v(ft,"class","language-rust"),v(Tt,"class","language-undefined"),v(St,"href","https://www.chessprogramming.org/Perft_Results"),v(St,"rel","nofollow"),v(lo,"class","language-rust"),v(Mo,"class","language-undefined"),v(si,"href","https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Minimax.svg/400px-Minimax.svg.png"),v(si,"rel","nofollow"),v(oi,"alt","Minimax behavior"),I(oi,"width","100%"),E(oi.src,ii="/protochess/minimax-diagram.png")||v(oi,"src","/protochess/minimax-diagram.png"),v(hi,"class","language-rust"),v(jp,"href","https://www.youtube.com/watch?v=AdNJ3fydeao"),v(jp,"rel","nofollow"),v(qp,"href","https://bulma.io/"),v(qp,"rel","nofollow"),v(Yp,"href","https://www.rust-lang.org/what/wasm"),v(Yp,"rel","nofollow"),v(Zp,"href","https://en.wikipedia.org/wiki/WebSocket"),v(Zp,"rel","nofollow"),v(mr,"alt","github screenshot"),I(mr,"width","100%"),E(mr.src,kr="/protochess/raytran-github.png")||v(mr,"src","/protochess/raytran-github.png"),v(tc,"href","https://www.youtube.com/watch?v=WXuK6gekU1Y"),v(tc,"rel","nofollow"),v(dc,"href","https://www.nytimes.com/2020/06/24/technology/facial-recognition-arrest.html"),v(dc,"rel","nofollow"),v(gc,"href","https://www.theregister.com/2020/07/01/mit_dataset_removed/"),v(gc,"rel","nofollow"),v(Pc,"href","https://www.forbes.com/sites/zakdoffman/2020/06/26/warning-apple-suddenly-catches-tiktok-secretly-spying-on-millions-of-iphone-users/#29fd52ca34ef"),v(Pc,"rel","nofollow"),v(Hc,"href","https://www.socialcooling.com/"),v(Hc,"rel","nofollow"),v(Oc,"href","https://www.propublica.org/article/health-insurers-are-vacuuming-up-details-about-you-and-it-could-raise-your-rates"),v(Oc,"rel","nofollow"),v($c,"href","https://time.com/collection/davos-2019/5502592/china-social-credit-score/"),v($c,"rel","nofollow"),v(el,"alt","site screenshot"),I(el,"width","100%"),E(el.src,tl="/protochess/protochess1.png")||v(el,"src","/protochess/protochess1.png"),v(il,"alt","site screenshot2"),I(il,"width","100%"),E(il.src,pl="/protochess/protochess2.png")||v(il,"src","/protochess/protochess2.png"),v(ll,"href","https://protochess.com"),v(ll,"rel","nofollow"),v(ml,"href","https://github.com/raytran"),v(ml,"rel","nofollow")},m(a,d){P(a,s,d),T(s,n),T(n,e),T(s,t),T(s,o),T(o,i),T(s,p),P(a,r,d),P(a,c,d),T(c,l),P(a,h,d),P(a,u,d),T(u,x),P(a,S,d),P(a,L,d),T(L,H),T(H,W),P(a,j,d),P(a,C,d),T(C,N),T(C,q),T(q,_),T(C,O),P(a,z,d),P(a,G,d),T(G,D),P(a,B,d),P(a,U,d),T(U,Y),P(a,$,d),P(a,V,d),T(V,K),T(V,Q),T(Q,J),T(V,Z),P(a,X,d),P(a,aa,d),T(aa,sa),P(a,na,d),P(a,ea,d),T(ea,ta),P(a,oa,d),P(a,ia,d),T(ia,pa),P(a,ra,d),P(a,ca,d),T(ca,la),P(a,ha,d),P(a,ua,d),T(ua,da),T(ua,ma),T(ma,ka),T(ua,ga),P(a,fa,d),P(a,wa,d),T(wa,ba),P(a,ya,d),P(a,va,d),T(va,Ea),P(a,Ia,d),P(a,Pa,d),T(Pa,Ta),T(Pa,Aa),T(Aa,xa),T(Pa,Sa),P(a,La,d),P(a,Ha,d),T(Ha,Ma),P(a,Ra,d),P(a,Wa,d),T(Wa,ja),P(a,Ca,d),P(a,Na,d),T(Na,qa),T(qa,_a),T(_a,Oa),T(Na,za),T(Na,Ga),T(Ga,Da),T(Da,Fa),T(Na,Ba),T(Na,Ua),T(Ua,Ya),T(Ya,$a),T(Na,Va),T(Na,Ka),T(Ka,Qa),T(Qa,Ja),P(a,Za,d),P(a,Xa,d),T(Xa,as),P(a,ss,d),P(a,ns,d),T(ns,es),P(a,ts,d),P(a,os,d),T(os,is),P(a,ps,d),P(a,rs,d),rs.innerHTML='<code class="language-rust"><span class="token keyword">let</span> board <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token char string">\'r\'</span><span class="token punctuation">,</span> <span class="token char string">\'n\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'q\'</span><span class="token punctuation">,</span> <span class="token char string">\'k\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'n\'</span><span class="token punctuation">,</span> <span class="token char string">\'r\'</span><span class="token punctuation">,</span>\n  <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span>\n  <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n  <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n  <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n  <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n  <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span>\n  <span class="token char string">\'R\'</span><span class="token punctuation">,</span> <span class="token char string">\'N\'</span><span class="token punctuation">,</span> <span class="token char string">\'B\'</span><span class="token punctuation">,</span> <span class="token char string">\'Q\'</span><span class="token punctuation">,</span> <span class="token char string">\'K\'</span><span class="token punctuation">,</span> <span class="token char string">\'B\'</span><span class="token punctuation">,</span> <span class="token char string">\'N\'</span><span class="token punctuation">,</span> <span class="token char string">\'R\'</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code>',P(a,cs,d),P(a,ls,d),T(ls,hs),P(a,us,d),P(a,ds,d),T(ds,ms),P(a,ks,d),P(a,gs,d),T(gs,fs),P(a,ws,d),P(a,bs,d),T(bs,ys),P(a,vs,d),P(a,Es,d),P(a,Ps,d),P(a,Ts,d),T(Ts,As),T(As,xs),P(a,Ss,d),P(a,Ls,d),T(Ls,Hs),P(a,Ms,d),P(a,Rs,d),T(Rs,Ws),P(a,js,d),P(a,Cs,d),T(Cs,Ns),P(a,qs,d),P(a,_s,d),T(_s,Os),P(a,zs,d),P(a,Gs,d),Gs.innerHTML='<code class="language-rust"><span class="token char string">\'r\'</span><span class="token punctuation">,</span> <span class="token char string">\'n\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'q\'</span><span class="token punctuation">,</span> <span class="token char string">\'k\'</span><span class="token punctuation">,</span> <span class="token char string">\'b\'</span><span class="token punctuation">,</span> <span class="token char string">\'n\'</span><span class="token punctuation">,</span> <span class="token char string">\'r\'</span><span class="token punctuation">,</span>\n<span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span> <span class="token char string">\'p\'</span><span class="token punctuation">,</span>\n<span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n<span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n<span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n<span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span> <span class="token char string">\' \'</span><span class="token punctuation">,</span>\n<span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span> <span class="token char string">\'P\'</span><span class="token punctuation">,</span>\n<span class="token char string">\'R\'</span><span class="token punctuation">,</span> <span class="token char string">\'N\'</span><span class="token punctuation">,</span> <span class="token char string">\'B\'</span><span class="token punctuation">,</span> <span class="token char string">\'Q\'</span><span class="token punctuation">,</span> <span class="token char string">\'K\'</span><span class="token punctuation">,</span> <span class="token char string">\'B\'</span><span class="token punctuation">,</span> <span class="token char string">\'N\'</span><span class="token punctuation">,</span> <span class="token char string">\'R\'</span><span class="token punctuation">,</span></code>',P(a,Ds,d),P(a,Fs,d),T(Fs,Bs),P(a,Us,d),P(a,Ys,d),Ys.innerHTML='<code class="language-rust"><span class="token number">00000000</span>\n<span class="token number">00000000</span>\n<span class="token number">00000000</span>\n<span class="token number">00000000</span>\n<span class="token number">00000000</span>\n<span class="token number">00000000</span>\n<span class="token number">11111111</span>\n<span class="token number">00000000</span></code>',P(a,$s,d),P(a,Vs,d),T(Vs,Ks),P(a,Qs,d),P(a,Js,d),T(Js,Zs),P(a,Xs,d),P(a,an,d),T(an,sn),T(an,nn),T(nn,en),T(an,tn),T(an,on),T(on,pn),T(an,rn),P(a,cn,d),P(a,ln,d),T(ln,hn),P(a,un,d),P(a,dn,d),T(dn,mn),P(a,kn,d),P(a,gn,d),T(gn,fn),P(a,wn,d),P(a,bn,d),T(bn,yn),P(a,vn,d),P(a,En,d),T(En,In),P(a,Pn,d),P(a,Tn,d),T(Tn,An),P(a,xn,d),P(a,Sn,d),T(Sn,Ln),P(a,Hn,d),P(a,Mn,d),Mn.innerHTML='<code class="language-rust"><span class="token keyword">let</span> moves <span class="token operator">=</span> <span class="token constant">KNIGHT_TABLE</span><span class="token punctuation">[</span><span class="token constant">C3</span><span class="token punctuation">]</span>\n<span class="token comment">// which gives you:</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> x <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span></code>',P(a,Rn,d),P(a,Wn,d),T(Wn,jn),P(a,Cn,d),P(a,Nn,d),T(Nn,qn),P(a,_n,d),P(a,On,d),On.innerHTML='<code class="language-rust"><span class="token comment">//All moves, including attacking our own pieces</span>\n<span class="token keyword">let</span> moves <span class="token operator">=</span> <span class="token constant">KNIGHT_TABLE</span><span class="token punctuation">[</span><span class="token constant">C3</span><span class="token punctuation">]</span>\n<span class="token comment">//Moves, but only the ones that don\'t attack our own team</span>\nmoves <span class="token operator">&amp;=</span> <span class="token operator">!</span><span class="token constant">MY_PIECES</span> <span class="token comment">//Notice the use of the AND and NOT operators</span></code>',P(a,zn,d),P(a,Gn,d),T(Gn,Dn),P(a,Fn,d),P(a,Bn,d),T(Bn,Un),P(a,Yn,d),P(a,$n,d),T($n,Vn),T($n,Kn),T(Kn,Qn),T($n,Jn),P(a,Zn,d),P(a,Xn,d),T(Xn,ae),P(a,se,d),P(a,ne,d),ne.innerHTML='<code class="language-undefined">The direction (north, west, east, south, etc)\nThe pieces in the way (we’ll call them blockers)</code>',P(a,ee,d),P(a,te,d),T(te,oe),P(a,ie,d),P(a,pe,d),pe.innerHTML='<code class="language-undefined">00000000, 00000001, 00000010, ..... 11111111</code>',P(a,re,d),P(a,ce,d),T(ce,le),P(a,he,d),P(a,ue,d),ue.innerHTML='<code class="language-rust"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">256</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">let</span> state <span class="token operator">=</span> i<span class="token punctuation">;</span>\n    <span class="token punctuation">...</span>\n<span class="token punctuation">&#125;</span></code>',P(a,de,d),P(a,me,d),T(me,ke),P(a,ge,d),P(a,fe,d),fe.innerHTML='<code class="language-rust"><span class="token constant">SLIDING_MOVES</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span>occupancy<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">00111100</span></code>',P(a,we,d),P(a,be,d),T(be,ye),P(a,ve,d),P(a,Ee,d),T(Ee,Ie),P(a,Pe,d),P(a,Te,d),Te.innerHTML='<code class="language-rust"><span class="token keyword">let</span> bitboard <span class="token operator">=</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> x <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span></code>',P(a,Ae,d),P(a,xe,d),xe.innerHTML='<code class="language-rust"><span class="token comment">//Shift the bitboard down to the first rank (8 bits per rank)</span>\nbitboard <span class="token operator">=</span> bitboard <span class="token operator">>></span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">8</span> \n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> x <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span></code>',P(a,Se,d),P(a,Le,d),Le.innerHTML='<code class="language-rust"><span class="token comment">// Remove everything that is not on the first rank</span>\nbitboard <span class="token operator">=</span> bitboard <span class="token operator">&amp;</span> <span class="token constant">FIRST_RANK</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>\n<span class="token number">1</span> <span class="token punctuation">.</span> x <span class="token punctuation">.</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span></code>',P(a,He,d),P(a,Me,d),T(Me,Re),P(a,We,d),P(a,je,d),je.innerHTML='<code class="language-rust"><span class="token constant">SLIDING_MOVES</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>10001100b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">11011000</span>\n<span class="token comment">//2 is the x index with our mapping</span>\n<span class="token comment">//10001100b represents the bits at the first rank</span>\n<span class="token comment">//11011000 is the precalculated sliding moves</span></code>',P(a,Ce,d),P(a,Ne,d),T(Ne,qe),P(a,_e,d),P(a,Oe,d),Oe.innerHTML='<code class="language-undefined">. . . . . . . .\n. . . . . . . .\n. . . . . . . .\n. . . . . . . .\n. . . . . . . .\n1 1 x 1 1 . . .\n. . . . . . . .\n. . . . . . . .</code>',P(a,ze,d),P(a,Ge,d),T(Ge,De),P(a,Fe,d),P(a,Be,d),T(Be,Ue),P(a,Ye,d),P(a,$e,d),T($e,Ve),P(a,Ke,d),P(a,Qe,d),T(Qe,Je),P(a,Ze,d),P(a,Xe,d),Xe.innerHTML='<code class="language-rust"><span class="token keyword">let</span> movelist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n<span class="token keyword">let</span> from_index <span class="token operator">=</span> <span class="token comment">/* some piece location */</span>\n<span class="token keyword">let</span> moves_bitboard <span class="token operator">=</span> <span class="token constant">KNIGHT_TABLE</span><span class="token punctuation">[</span>from_index<span class="token punctuation">]</span>\n<span class="token keyword">while</span> moves_bitboard <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">let</span> to_index <span class="token operator">=</span> moves_bitboard<span class="token punctuation">.</span><span class="token function">lowest_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">//Compiled languages can do this very efficiently with intrinsics</span>\n    movelist<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>new <span class="token class-name">Move</span><span class="token punctuation">(</span>from_index<span class="token punctuation">,</span> to_index<span class="token punctuation">)</span><span class="token punctuation">)</span>\n    moves_bitboard<span class="token punctuation">.</span><span class="token function">set_bit</span><span class="token punctuation">(</span>from_index<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>\n<span class="token punctuation">&#125;</span></code>',P(a,at,d),P(a,st,d),T(st,nt),P(a,et,d),P(a,tt,d),T(tt,ot),P(a,it,d),P(a,pt,d),T(pt,rt),T(rt,ct),T(pt,lt),P(a,ht,d),P(a,ut,d),T(ut,dt),T(dt,mt),T(ut,kt),P(a,gt,d),P(a,ft,d),ft.innerHTML='<code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">perft</span><span class="token punctuation">(</span>int depth<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>\n  <span class="token keyword">let</span> nodes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">for</span> <span class="token keyword">move</span> <span class="token keyword">in</span> <span class="token function">generate_moves</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>\n    board<span class="token punctuation">.</span><span class="token function">makeMove</span><span class="token punctuation">(</span><span class="token keyword">move</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    nodes <span class="token operator">+=</span> <span class="token function">perft</span><span class="token punctuation">(</span>depth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    board<span class="token punctuation">.</span><span class="token function">undoMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token keyword">return</span> nodes<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',P(a,wt,d),P(a,bt,d),T(bt,yt),P(a,vt,d),P(a,Et,d),T(Et,It),P(a,Pt,d),P(a,Tt,d),Tt.innerHTML='<code class="language-undefined">depth nodes\n0     1\n1     20\n2     400\n3     8,902\n4     197,281\n5     4,865,609\n6     119,060,324\n7     3,195,901,860\n8     84,998,978,956</code>',P(a,At,d),P(a,xt,d),T(xt,St),T(St,Lt),P(a,Ht,d),P(a,Mt,d),T(Mt,Rt),T(Mt,Wt),T(Wt,jt),T(Mt,Ct),T(Mt,Nt),T(Nt,qt),T(Mt,_t),P(a,Ot,d),P(a,zt,d),T(zt,Gt),P(a,Dt,d),P(a,Ft,d),T(Ft,Bt),P(a,Ut,d),P(a,Yt,d),T(Yt,$t),P(a,Vt,d),P(a,Kt,d),T(Kt,Qt),T(Kt,Jt),T(Jt,Zt),T(Kt,Xt),T(Kt,ao),T(ao,so),T(Kt,no),P(a,eo,d),P(a,to,d),T(to,oo),T(to,io),T(io,po),T(to,ro),P(a,co,d),P(a,lo,d),lo.innerHTML='<code class="language-rust"><span class="token comment">// Scores are in centipawns</span>\n<span class="token keyword">const</span> <span class="token constant">KING_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">9999</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">QUEEN_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">900</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">ROOK_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">BISHOP_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">350</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">KNIGHT_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">PAWN_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">CHECKMATED_SCORE</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">99999</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token constant">CASTLING_BONUS</span><span class="token punctuation">:</span><span class="token keyword">isize</span> <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span></code>',P(a,ho,d),P(a,uo,d),T(uo,mo),P(a,ko,d),P(a,go,d),T(go,fo),T(go,wo),T(wo,bo),T(go,yo),P(a,vo,d),P(a,Eo,d),T(Eo,Io),T(Eo,Po),T(Po,To),T(Eo,Ao),P(a,xo,d),P(a,So,d),T(So,Lo),P(a,Ho,d),P(a,Mo,d),Mo.innerHTML='<code class="language-undefined">// pawn\n0,  0,  0,  0,  0,  0,  0,  0,\n50, 50, 50, 50, 50, 50, 50, 50,\n10, 10, 20, 30, 30, 20, 10, 10,\n5,  5,  10, 25, 25, 10,  5,  5,\n0,  0,   0, 20, 20,  0,  0,  0,\n5, -5, -10,  0,  0,-10, -5,  5,\n5, 10,  10,-20,-20, 10, 10,  5,\n0,  0,   0,  0,  0,  0,  0,  0</code>',P(a,Ro,d),P(a,Wo,d),T(Wo,jo),P(a,Co,d),P(a,No,d),T(No,qo),P(a,_o,d),P(a,Oo,d),T(Oo,zo),P(a,Go,d),P(a,Do,d),T(Do,Fo),P(a,Bo,d),P(a,Uo,d),T(Uo,Yo),P(a,$o,d),P(a,Vo,d),T(Vo,Ko),P(a,Qo,d),P(a,Jo,d),T(Jo,Zo),P(a,Xo,d),P(a,ai,d),T(ai,si),T(si,ni),T(ai,ei),P(a,ti,d),P(a,oi,d),P(a,pi,d),P(a,ri,d),T(ri,ci),P(a,li,d),P(a,hi,d),hi.innerHTML='<code class="language-rust">int <span class="token function">negaMax</span><span class="token punctuation">(</span> int depth <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> depth <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    int max <span class="token operator">=</span> <span class="token operator">-</span>oo<span class="token punctuation">;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span> all moves<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        score <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">negaMax</span><span class="token punctuation">(</span> depth <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span> score <span class="token operator">></span> max <span class="token punctuation">)</span>\n            max <span class="token operator">=</span> score<span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n    <span class="token keyword">return</span> max<span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',P(a,ui,d),P(a,di,d),T(di,mi),P(a,ki,d),P(a,gi,d),T(gi,fi),P(a,wi,d),P(a,bi,d),T(bi,yi),T(yi,vi),T(yi,Ei),T(Ei,Ii),T(Ii,Pi),T(Ei,Ti),T(Ei,Ai),T(Ai,xi),T(Ei,Si),T(Ei,Li),T(Li,Hi),T(bi,Mi),T(bi,Ri),T(Ri,Wi),T(Ri,ji),T(ji,Ci),T(Ci,Ni),T(bi,qi),T(bi,_i),T(_i,Oi),T(_i,zi),T(zi,Gi),T(Gi,Di),T(bi,Fi),T(bi,Bi),T(Bi,Ui),T(Bi,Yi),T(Yi,$i),T($i,Vi),T(bi,Ki),T(bi,Qi),T(Qi,Ji),T(Qi,Zi),T(Zi,Xi),T(Xi,ap),T(bi,sp),T(bi,np),T(np,ep),T(np,tp),T(tp,op),T(op,ip),T(bi,pp),T(bi,rp),T(rp,cp),T(rp,lp),T(lp,hp),T(hp,up),T(bi,dp),T(bi,mp),T(mp,kp),T(mp,gp),T(gp,fp),T(fp,wp),T(bi,bp),T(bi,yp),T(yp,vp),T(yp,Ep),T(Ep,Ip),T(Ip,Pp),P(a,Tp,d),P(a,Ap,d),T(Ap,xp),P(a,Sp,d),P(a,Lp,d),T(Lp,Hp),P(a,Mp,d),P(a,Rp,d),T(Rp,Wp),T(Rp,jp),T(jp,Cp),T(Rp,Np),T(Rp,qp),T(qp,_p),T(Rp,Op),P(a,zp,d),P(a,Gp,d),T(Gp,Dp),P(a,Fp,d),P(a,Bp,d),T(Bp,Up),T(Bp,Yp),T(Yp,$p),T(Bp,Vp),P(a,Kp,d),P(a,Qp,d),T(Qp,Jp),T(Qp,Zp),T(Zp,Xp),T(Qp,ar),P(a,sr,d),P(a,nr,d),T(nr,er),P(a,tr,d),P(a,or,d),T(or,ir),P(a,pr,d),P(a,rr,d),T(rr,cr),P(a,lr,d),P(a,hr,d),T(hr,ur),P(a,dr,d),P(a,mr,d),P(a,gr,d),P(a,fr,d),T(fr,wr),P(a,br,d),P(a,yr,d),T(yr,vr),P(a,Er,d),P(a,Ir,d),T(Ir,Pr),P(a,Tr,d),P(a,Ar,d),T(Ar,xr),T(xr,Sr),T(Ar,Lr),T(Ar,Hr),T(Hr,Mr),T(Ar,Rr),T(Ar,Wr),T(Wr,jr),P(a,Cr,d),P(a,Nr,d),T(Nr,qr),P(a,_r,d),P(a,Or,d),T(Or,zr),T(Or,Gr),T(Gr,Dr),T(Or,Fr),T(Or,Br),T(Br,Ur),T(Or,Yr),T(Or,$r),T($r,Vr),T($r,Kr),T(Kr,Qr),T($r,Jr),P(a,Zr,d),P(a,Xr,d),T(Xr,ac),P(a,sc,d),P(a,nc,d),T(nc,ec),T(nc,tc),T(tc,oc),T(nc,ic),P(a,pc,d),P(a,rc,d),T(rc,cc),P(a,lc,d),P(a,hc,d),T(hc,uc),T(hc,dc),T(dc,mc),T(hc,kc),T(hc,gc),T(gc,fc),P(a,wc,d),P(a,bc,d),T(bc,yc),P(a,vc,d),P(a,Ec,d),T(Ec,Ic),T(Ec,Pc),T(Pc,Tc),T(Ec,Ac),P(a,xc,d),P(a,Sc,d),T(Sc,Lc),T(Sc,Hc),T(Hc,Mc),T(Sc,Rc),P(a,Wc,d),P(a,jc,d),T(jc,Cc),P(a,Nc,d),P(a,qc,d),T(qc,_c),T(qc,Oc),T(Oc,zc),T(qc,Gc),P(a,Dc,d),P(a,Fc,d),T(Fc,Bc),P(a,Uc,d),P(a,Yc,d),T(Yc,$c),T($c,Vc),T(Yc,Kc),P(a,Qc,d),P(a,Jc,d),T(Jc,Zc),P(a,Xc,d),P(a,al,d),T(al,sl),P(a,nl,d),P(a,el,d),P(a,ol,d),P(a,il,d),P(a,rl,d),P(a,cl,d),T(cl,ll),T(ll,hl),P(a,ul,d),P(a,dl,d),T(dl,ml),T(ml,kl)},p:A,d(a){a&&b(s),a&&b(r),a&&b(c),a&&b(h),a&&b(u),a&&b(S),a&&b(L),a&&b(j),a&&b(C),a&&b(z),a&&b(G),a&&b(B),a&&b(U),a&&b($),a&&b(V),a&&b(X),a&&b(aa),a&&b(na),a&&b(ea),a&&b(oa),a&&b(ia),a&&b(ra),a&&b(ca),a&&b(ha),a&&b(ua),a&&b(fa),a&&b(wa),a&&b(ya),a&&b(va),a&&b(Ia),a&&b(Pa),a&&b(La),a&&b(Ha),a&&b(Ra),a&&b(Wa),a&&b(Ca),a&&b(Na),a&&b(Za),a&&b(Xa),a&&b(ss),a&&b(ns),a&&b(ts),a&&b(os),a&&b(ps),a&&b(rs),a&&b(cs),a&&b(ls),a&&b(us),a&&b(ds),a&&b(ks),a&&b(gs),a&&b(ws),a&&b(bs),a&&b(vs),a&&b(Es),a&&b(Ps),a&&b(Ts),a&&b(Ss),a&&b(Ls),a&&b(Ms),a&&b(Rs),a&&b(js),a&&b(Cs),a&&b(qs),a&&b(_s),a&&b(zs),a&&b(Gs),a&&b(Ds),a&&b(Fs),a&&b(Us),a&&b(Ys),a&&b($s),a&&b(Vs),a&&b(Qs),a&&b(Js),a&&b(Xs),a&&b(an),a&&b(cn),a&&b(ln),a&&b(un),a&&b(dn),a&&b(kn),a&&b(gn),a&&b(wn),a&&b(bn),a&&b(vn),a&&b(En),a&&b(Pn),a&&b(Tn),a&&b(xn),a&&b(Sn),a&&b(Hn),a&&b(Mn),a&&b(Rn),a&&b(Wn),a&&b(Cn),a&&b(Nn),a&&b(_n),a&&b(On),a&&b(zn),a&&b(Gn),a&&b(Fn),a&&b(Bn),a&&b(Yn),a&&b($n),a&&b(Zn),a&&b(Xn),a&&b(se),a&&b(ne),a&&b(ee),a&&b(te),a&&b(ie),a&&b(pe),a&&b(re),a&&b(ce),a&&b(he),a&&b(ue),a&&b(de),a&&b(me),a&&b(ge),a&&b(fe),a&&b(we),a&&b(be),a&&b(ve),a&&b(Ee),a&&b(Pe),a&&b(Te),a&&b(Ae),a&&b(xe),a&&b(Se),a&&b(Le),a&&b(He),a&&b(Me),a&&b(We),a&&b(je),a&&b(Ce),a&&b(Ne),a&&b(_e),a&&b(Oe),a&&b(ze),a&&b(Ge),a&&b(Fe),a&&b(Be),a&&b(Ye),a&&b($e),a&&b(Ke),a&&b(Qe),a&&b(Ze),a&&b(Xe),a&&b(at),a&&b(st),a&&b(et),a&&b(tt),a&&b(it),a&&b(pt),a&&b(ht),a&&b(ut),a&&b(gt),a&&b(ft),a&&b(wt),a&&b(bt),a&&b(vt),a&&b(Et),a&&b(Pt),a&&b(Tt),a&&b(At),a&&b(xt),a&&b(Ht),a&&b(Mt),a&&b(Ot),a&&b(zt),a&&b(Dt),a&&b(Ft),a&&b(Ut),a&&b(Yt),a&&b(Vt),a&&b(Kt),a&&b(eo),a&&b(to),a&&b(co),a&&b(lo),a&&b(ho),a&&b(uo),a&&b(ko),a&&b(go),a&&b(vo),a&&b(Eo),a&&b(xo),a&&b(So),a&&b(Ho),a&&b(Mo),a&&b(Ro),a&&b(Wo),a&&b(Co),a&&b(No),a&&b(_o),a&&b(Oo),a&&b(Go),a&&b(Do),a&&b(Bo),a&&b(Uo),a&&b($o),a&&b(Vo),a&&b(Qo),a&&b(Jo),a&&b(Xo),a&&b(ai),a&&b(ti),a&&b(oi),a&&b(pi),a&&b(ri),a&&b(li),a&&b(hi),a&&b(ui),a&&b(di),a&&b(ki),a&&b(gi),a&&b(wi),a&&b(bi),a&&b(Tp),a&&b(Ap),a&&b(Sp),a&&b(Lp),a&&b(Mp),a&&b(Rp),a&&b(zp),a&&b(Gp),a&&b(Fp),a&&b(Bp),a&&b(Kp),a&&b(Qp),a&&b(sr),a&&b(nr),a&&b(tr),a&&b(or),a&&b(pr),a&&b(rr),a&&b(lr),a&&b(hr),a&&b(dr),a&&b(mr),a&&b(gr),a&&b(fr),a&&b(br),a&&b(yr),a&&b(Er),a&&b(Ir),a&&b(Tr),a&&b(Ar),a&&b(Cr),a&&b(Nr),a&&b(_r),a&&b(Or),a&&b(Zr),a&&b(Xr),a&&b(sc),a&&b(nc),a&&b(pc),a&&b(rc),a&&b(lc),a&&b(hc),a&&b(wc),a&&b(bc),a&&b(vc),a&&b(Ec),a&&b(xc),a&&b(Sc),a&&b(Wc),a&&b(jc),a&&b(Nc),a&&b(qc),a&&b(Dc),a&&b(Fc),a&&b(Uc),a&&b(Yc),a&&b(Qc),a&&b(Jc),a&&b(Xc),a&&b(al),a&&b(nl),a&&b(el),a&&b(ol),a&&b(il),a&&b(rl),a&&b(cl),a&&b(ul),a&&b(dl)}}}function L(a){let s,n;const u=[a[0],H];let d={$$slots:{default:[S]},$$scope:{ctx:a}};for(let t=0;t<u.length;t+=1)d=e(d,u[t]);return s=new x({props:d}),{c(){t(s.$$.fragment)},l(a){o(s.$$.fragment,a)},m(a,e){i(s,a,e),n=!0},p(a,[n]){const e=1&n?p(u,[1&n&&r(a[0]),0&n&&r(H)]):{};2&n&&(e.$$scope={dirty:n,ctx:a}),s.$set(e)},i(a){n||(c(s.$$.fragment,a),n=!0)},o(a){l(s.$$.fragment,a),n=!1},d(a){h(s,a)}}}const H={title:"Protochess.com",subtitle:"How to write a chess engine in 6 months.",published:"2020-06-3",author:"raytran",thumbnail:"protochess/protochess1.png",summary:"Online multiplayer chess website that lets you build custom pieces/boards. Written in Svelte + Rust.\n",layout:"blog",tags:"personal, multiplayer, website, rust, svelte"},{title:M,subtitle:R,published:W,author:j,thumbnail:C,summary:N,layout:q,tags:_}=H;function O(a,s,n){return a.$$set=a=>{n(0,s=e(e({},s),u(a)))},[s=u(s)]}class z extends a{constructor(a){super(),s(this,a,O,L,n,{})}}var G=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z,metadata:H});export{z as P,G as _,H as m};
